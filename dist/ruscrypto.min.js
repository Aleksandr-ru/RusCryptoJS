/*! For license information please see ruscrypto.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("RusCryptoJS",[],e):"object"==typeof exports?exports.RusCryptoJS=e():t.RusCryptoJS=e()}("undefined"!=typeof self?self:this,()=>(()=>{var __webpack_modules__={128:t=>{t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},157:(t,e,n)=>{var r=n(7087),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},237:(t,e,n)=>{for(var r,i=n(7526),o=n(3341),a=n(4415),_=a("typed_array"),c=a("view"),s=!(!i.ArrayBuffer||!i.DataView),u=s,E=0,l="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");E<9;)(r=i[l[E++]])?(o(r.prototype,_,!0),o(r.prototype,c,!0)):u=!1;t.exports={ABV:s,CONSTR:u,TYPED:_,VIEW:c}},341:(t,e,n)=>{"use strict";var r=n(5411),i=n(4228),o=n(9190),a=n(8828),_=n(1485),c=n(2535),s=n(9600),u=n(9448),E=Math.min,l=[].push,f="split",C="length",h="lastIndex",d=4294967295,A=!u(function(){RegExp(d,"y")});n(9228)("split",2,function(t,e,n,u){var p;return p="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[C]||2!="ab"[f](/(?:ab)*/)[C]||4!="."[f](/(.?)(.?)/)[C]||"."[f](/()()/)[C]>1||""[f](/.?/)[C]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,_,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),E=0,f=void 0===e?d:e>>>0,A=new RegExp(t.source,u+"g");(o=s.call(A,i))&&!((a=A[h])>E&&(c.push(i.slice(E,o.index)),o[C]>1&&o.index<i[C]&&l.apply(c,o.slice(1)),_=o[0][C],E=a,c[C]>=f));)A[h]===o.index&&A[h]++;return E===i[C]?!_&&A.test("")||c.push(""):c.push(i.slice(E)),c[C]>f?c.slice(0,f):c}:"0"[f](void 0,0)[C]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):p.call(String(i),n,r)},function(t,e){var r=u(p,t,this,e,p!==n);if(r.done)return r.value;var s=i(t),l=String(this),f=o(s,RegExp),C=s.unicode,h=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(A?"y":"g"),T=new f(A?s:"^(?:"+s.source+")",h),I=void 0===e?d:e>>>0;if(0===I)return[];if(0===l.length)return null===c(T,l)?[l]:[];for(var S=0,O=0,R=[];O<l.length;){T.lastIndex=A?O:0;var N,v=c(T,A?l:l.slice(O));if(null===v||(N=E(_(T.lastIndex+(A?0:O)),l.length))===S)O=a(l,O,C);else{if(R.push(l.slice(S,O)),R.length===I)return R;for(var g=1;g<=v.length-1;g++)if(R.push(v[g]),R.length===I)return R;O=S=N}}return R.push(l.slice(S)),R}]})},361:t=>{var e=function(t){function e(t){return!!(t&&t.call&&t.apply)}function n(t,n){return e(t[n])?function(){return t[n].apply(t,arguments)}:t[n]}function r(t){return function(){return t}}function i(){t.ready=Promise.resolve(!0),t.isExtensionInstalled=r(Promise.resolve(!1)),t.isPluginInstalled=r(Promise.resolve(!0)),t.loadPlugin=o,window.rutokenLoaded=_}function o(){var t=document.createElement("object");t.style.setProperty("visibility","hidden","important"),t.style.setProperty("width","0px","important"),t.style.setProperty("height","0px","important"),t.style.setProperty("margin","0px","important"),t.style.setProperty("padding","0px","important"),t.style.setProperty("border-style","none","important"),t.style.setProperty("border-width","0px","important"),t.style.setProperty("max-width","0px","important"),t.style.setProperty("max-height","0px","important"),t.innerHTML="<param name='onload' value='rutokenLoaded'/>",t.setAttribute("type",f),document.body.appendChild(t);var e=new Promise(function(t,e){l.push(t)});return e}function a(){return C.loadPlugin().then(function(t){return c(t)}).then(function(t){return t.wrapWithOldInterface=s,t})}function _(t,e){E(t).then(function(t){if(0==l.length)throw"Internal error";l.shift()(t)})}function c(t){var r={},i=[];for(var o in t)!function(o){e(t[o].then)?i.push(t[o].then(function(i){return c(i).then(function(i){e(i)?r[o]=n(t,o):r[o]=i})})):r[o]=t[o]}(o);return 0==i.length?new Promise(function(e){e(t)}):Promise.all(i).then(function(){return r})}function s(){var t={};for(var n in this)e(this[n])?t[n]=function(t,e){return function(){var n=arguments[arguments.length-2],r=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0,-2);return e.apply(t,i).then(function(t){n(t)},function(t){r(t.message)})}}(this,this[n]):t[n]=this[n];return new Promise(function(e){e(t)})}function u(){var t={originalObject:this.originalObject};for(var e in this.originalObject)t[e]=n(this.originalObject,e);return new Promise(function(e){e(t)})}function E(t){var n={originalObject:t,wrapWithOldInterface:u};for(var r in t)e(t[r])?n[r]=function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return new Promise(function(r,i){n.push(r,i),e.apply(t,n)})}}(t,t[r]):n[r]=t[r];return new Promise(function(t){t(n)})}var l=[],f="application/x-rutoken-pki",C=window["C3B7563B-BF85-45B7-88FC-7CFF1BD3C2DB"];if(C)!function(){var e=C.initialize().then(function(){return C.isPluginInstalled()}).then(function(e){return t.isExtensionInstalled=r(Promise.resolve(!0)),t.isPluginInstalled=n(C,"isPluginInstalled"),e&&(f="application/x-rutoken-plugin",t.loadPlugin=a),!0});t.ready=e}();else if(navigator.mimeTypes&&navigator.mimeTypes[f])i();else try{new ActiveXObject("Aktiv.CryptoPlugin"),i()}catch(e){t.ready=Promise.resolve(!0),t.isExtensionInstalled=r(Promise.resolve(!1)),t.isPluginInstalled=r(Promise.resolve(!1))}return t}(e||{});t.exports=e},489:(t,e,n)=>{var r=n(7967).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||n(1763)&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},627:(t,e,n)=>{var r=n(7917),i=n(8270),o=n(766)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},738:function(){!function(t){"use strict";t.console||(t.console={});for(var e,n,r=t.console,i=function(){},o=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)r[e]||(r[e]={});for(;n=a.pop();)r[n]||(r[n]=i)}("undefined"==typeof window?this:window)},762:(t,e,n)=>{var r=n(4848),i=n(7574)("iterator"),o=n(906);t.exports=n(6094).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},766:(t,e,n)=>{var r=n(4556)("keys"),i=n(4415);t.exports=function(t){return r[t]||(r[t]=i(t))}},906:t=>{t.exports={}},923:(t,e,n)=>{var r=n(2127),i=n(6094),o=n(9448);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},1060:(t,e)=>{e.f=Object.getOwnPropertySymbols},1158:(t,e,n)=>{"use strict";var r=n(4228);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1212:(t,e,n)=>{var r=n(7087),i=n(3344);t.exports=function(t){return function(e,n){var o,a,_=String(i(e)),c=r(n),s=_.length;return c<0||c>=s?t?"":void 0:(o=_.charCodeAt(c))<55296||o>56319||c+1===s||(a=_.charCodeAt(c+1))<56320||a>57343?t?_.charAt(c):o:t?_.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},1249:(t,e,n)=>{var r=n(5089);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},1308:(t,e,n)=>{var r=n(7526).document;t.exports=r&&r.documentElement},1311:(t,e,n)=>{var r=n(4561),i=n(6140);t.exports=Object.keys||function(t){return r(t,i)}},1384:(t,e,n)=>{var r=n(7526),i=n(2780).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,_=r.Promise,c="process"==n(5089)(a);t.exports=function(){var t,e,n,s=function(){var r,i;for(c&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(s)};else if(!o||r.navigator&&r.navigator.standalone)if(_&&_.resolve){var u=_.resolve(void 0);n=function(){u.then(s)}}else n=function(){i.call(r,s)};else{var E=!0,l=document.createTextNode("");new o(s).observe(l,{characterData:!0}),n=function(){l.data=E=!E}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},1430:(t,e,n)=>{var r=n(2127);r(r.S+r.F,"Object",{assign:n(8206)})},1464:(t,e,n)=>{var r=n(7221),i=n(1485),o=n(157);t.exports=function(t){return function(e,n,a){var _,c=r(e),s=i(c.length),u=o(a,s);if(t&&n!=n){for(;s>u;)if((_=c[u++])!=_)return!0}else for(;s>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},1485:(t,e,n)=>{var r=n(7087),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},1508:(t,e,n)=>{var r=n(906),i=n(7574)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},1626:(t,e,n)=>{var r=n(7967),i=n(4228),o=n(1311);t.exports=n(1763)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),_=a.length,c=0;_>c;)r.f(t,n=a[c++],e[n]);return t}},1763:(t,e,n)=>{t.exports=!n(9448)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},1996:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2127:(t,e,n)=>{var r=n(7526),i=n(6094),o=n(3341),a=n(8859),_=n(5052),c="prototype",s=function(t,e,n){var u,E,l,f,C=t&s.F,h=t&s.G,d=t&s.S,A=t&s.P,p=t&s.B,T=h?r:d?r[e]||(r[e]={}):(r[e]||{})[c],I=h?i:i[e]||(i[e]={}),S=I[c]||(I[c]={});for(u in h&&(n=e),n)l=((E=!C&&T&&void 0!==T[u])?T:n)[u],f=p&&E?_(l,r):A&&"function"==typeof l?_(Function.call,l):l,T&&a(T,u,l,t&s.U),I[u]!=l&&o(I,u,f),A&&S[u]!=l&&(S[u]=l)};r.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},2535:(t,e,n)=>{"use strict";var r=n(4848),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},2750:t=>{t.exports=!1},2780:(t,e,n)=>{var r,i,o,a=n(5052),_=n(4877),c=n(1308),s=n(6034),u=n(7526),E=u.process,l=u.setImmediate,f=u.clearImmediate,C=u.MessageChannel,h=u.Dispatch,d=0,A={},p="onreadystatechange",T=function(){var t=+this;if(A.hasOwnProperty(t)){var e=A[t];delete A[t],e()}},I=function(t){T.call(t.data)};l&&f||(l=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return A[++d]=function(){_("function"==typeof t?t:Function(t),e)},r(d),d},f=function(t){delete A[t]},"process"==n(5089)(E)?r=function(t){E.nextTick(a(T,t,1))}:h&&h.now?r=function(t){h.now(a(T,t,1))}:C?(o=(i=new C).port2,i.port1.onmessage=I,r=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(t){u.postMessage(t+"","*")},u.addEventListener("message",I,!1)):r=p in s("script")?function(t){c.appendChild(s("script"))[p]=function(){c.removeChild(this),T.call(t)}}:function(t){setTimeout(a(T,t,1),0)}),t.exports={set:l,clear:f}},2820:(t,e,n)=>{n(5392)("asyncIterator")},2956:(t,e,n)=>{t.exports=!n(1763)&&!n(9448)(function(){return 7!=Object.defineProperty(n(6034)("div"),"a",{get:function(){return 7}}).a})},2975:(t,e,n)=>{"use strict";var r=n(1212)(!0);n(8175)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},2988:(t,e,n)=>{var r=n(4415)("meta"),i=n(3305),o=n(7917),a=n(7967).f,_=0,c=Object.isExtensible||function(){return!0},s=!n(9448)(function(){return c(Object.preventExtensions({}))}),u=function(t){a(t,r,{value:{i:"O"+ ++_,w:{}}})},E=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[r].w},onFreeze:function(t){return s&&E.NEED&&c(t)&&!o(t,r)&&u(t),t}}},3048:(t,e,n)=>{var r=n(3305);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},3133:(t,e,n)=>{var r=n(7087),i=n(1485);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},3305:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},3341:(t,e,n)=>{var r=n(7967),i=n(1996);t.exports=n(1763)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},3344:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},3387:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},3606:(t,e,n)=>{var r=n(3305),i=n(7981),o=n(7574)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},3844:(t,e,n)=>{var r=n(7967).f,i=n(7917),o=n(7574)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},3863:(t,e,n)=>{"use strict";var r=n(5052),i=n(2127),o=n(8270),a=n(7368),_=n(1508),c=n(1485),s=n(7227),u=n(762);i(i.S+i.F*!n(8931)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,E,l=o(t),f="function"==typeof this?this:Array,C=arguments.length,h=C>1?arguments[1]:void 0,d=void 0!==h,A=0,p=u(l);if(d&&(h=r(h,C>2?arguments[2]:void 0,2)),null==p||f==Array&&_(p))for(n=new f(e=c(l.length));e>A;A++)s(n,A,d?h(l[A],A):l[A]);else for(E=p.call(l),n=new f;!(i=E.next()).done;A++)s(n,A,d?a(E,h,[i.value,A],!0):i.value);return n.length=A,n}})},4040:(t,e,n)=>{"use strict";var r=n(4228),i=n(1485),o=n(8828),a=n(2535);n(9228)("match",1,function(t,e,n,_){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=_(n,t,this);if(e.done)return e.value;var c=r(t),s=String(this);if(!c.global)return a(c,s);var u=c.unicode;c.lastIndex=0;for(var E,l=[],f=0;null!==(E=a(c,s));){var C=String(E[0]);l[f]=C,""===C&&(c.lastIndex=o(s,i(c.lastIndex),u)),f++}return 0===f?null:l}]})},4116:(t,e,n)=>{"use strict";var r=n(9600);n(2127)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},4228:(t,e,n)=>{var r=n(3305);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},4258:(t,e,n)=>{"use strict";var r=n(3387);function i(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},4415:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},4438:(t,e,n)=>{"use strict";var r=n(8270),i=n(157),o=n(1485);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),_=i(t,a),c=i(e,a),s=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===s?a:i(s,a))-c,a-_),E=1;for(c<_&&_<c+u&&(E=-1,c+=u-1,_+=u-1);u-- >0;)c in n?n[_]=n[c]:delete n[_],_+=E,c+=E;return n}},4514:(t,e,n)=>{var r=n(7526).navigator;t.exports=r&&r.userAgent||""},4556:(t,e,n)=>{var r=n(6094),i=n(7526),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(2750)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},4561:(t,e,n)=>{var r=n(7917),i=n(7221),o=n(1464)(!1),a=n(766)("IE_PROTO");t.exports=function(t,e){var n,_=i(t),c=0,s=[];for(n in _)n!=a&&r(_,n)&&s.push(n);for(;e.length>c;)r(_,n=e[c++])&&(~o(s,n)||s.push(n));return s}},4702:(t,e,n)=>{n(7209)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},4719:(t,e,n)=>{var r=n(4228),i=n(1626),o=n(6140),a=n(766)("IE_PROTO"),_=function(){},c="prototype",s=function(){var t,e=n(6034)("iframe"),r=o.length;for(e.style.display="none",n(1308).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[c][o[r]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(_[c]=r(t),n=new _,_[c]=null,n[a]=t):n=s(),void 0===e?n:i(n,e)}},4765:(t,e,n)=>{var r=n(7221),i=n(9415).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},4848:(t,e,n)=>{var r=n(5089),i=n(7574)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},4877:t=>{t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},4970:t=>{t.exports=function(t,e){return{value:e,done:!!t}}},5052:(t,e,n)=>{var r=n(3387);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},5089:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},5144:(t,e,n)=>{"use strict";var r=n(2127),i=n(6179)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(8184)(o)},5165:(t,e,n)=>{"use strict";var r=n(8184),i=n(4970),o=n(906),a=n(7221);t.exports=n(8175)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},5170:(t,e,n)=>{var r=n(3305),i=n(4228),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(5052)(Function.call,n(8641).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},5392:(t,e,n)=>{var r=n(7526),i=n(6094),o=n(2750),a=n(7960),_=n(7967).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||_(e,t,{value:a.f(t)})}},5411:(t,e,n)=>{var r=n(3305),i=n(5089),o=n(7574)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},5564:(t,e,n)=>{"use strict";var r=n(8270),i=n(157),o=n(1485);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,_=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,s=void 0===c?n:i(c,n);s>_;)e[_++]=t;return e}},5572:(t,e,n)=>{var r=n(3606);t.exports=function(t,e){return new(r(t))(e)}},5762:(t,e,n)=>{"use strict";var r=n(7526),i=n(7967),o=n(1763),a=n(7574)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},5890:(t,e,n)=>{for(var r=n(5165),i=n(1311),o=n(8859),a=n(7526),_=n(3341),c=n(906),s=n(7574),u=s("iterator"),E=s("toStringTag"),l=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},C=i(f),h=0;h<C.length;h++){var d,A=C[h],p=f[A],T=a[A],I=T&&T.prototype;if(I&&(I[u]||_(I,u,l),I[E]||_(I,E,A),c[A]=l,p))for(d in r)I[d]||o(I,d,r[d],!0)}},5957:(t,e,n)=>{var r=n(4228),i=n(3305),o=n(4258);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},5969:(t,e,n)=>{var r=n(1311),i=n(1060),o=n(8449);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,_=n(t),c=o.f,s=0;_.length>s;)c.call(t,a=_[s++])&&e.push(a);return e}},6032:(t,e,n)=>{"use strict";var r=n(4719),i=n(1996),o=n(3844),a={};n(3341)(a,n(7574)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},6034:(t,e,n)=>{var r=n(3305),i=n(7526).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},6065:(t,e,n)=>{var r=n(8859);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},6094:t=>{var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)},6140:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},6179:(t,e,n)=>{var r=n(5052),i=n(1249),o=n(8270),a=n(1485),_=n(5572);t.exports=function(t,e){var n=1==t,c=2==t,s=3==t,u=4==t,E=6==t,l=5==t||E,f=e||_;return function(e,_,C){for(var h,d,A=o(e),p=i(A),T=r(_,C,3),I=a(p.length),S=0,O=n?f(e,I):c?f(e,0):void 0;I>S;S++)if((l||S in p)&&(d=T(h=p[S],S,A),t))if(n)O[S]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return S;case 2:O.push(h)}else if(u)return!1;return E?-1:s||u?u:O}}},6440:t=>{t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},6517:(t,e,n)=>{"use strict";var r,i,o,a,_=n(2750),c=n(7526),s=n(5052),u=n(4848),E=n(2127),l=n(3305),f=n(3387),C=n(6440),h=n(8790),d=n(9190),A=n(2780).set,p=n(1384)(),T=n(4258),I=n(128),S=n(4514),O=n(5957),R="Promise",N=c.TypeError,v=c.process,g=v&&v.versions,m=g&&g.v8||"",D=c[R],y="process"==u(v),P=function(){},w=i=T.f,b=!!function(){try{var t=D.resolve(1),e=(t.constructor={})[n(7574)("species")]=function(t){t(P,P)};return(y||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==m.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),L=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;p(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,_=i?e.ok:e.fail,c=e.resolve,s=e.reject,u=e.domain;try{_?(i||(2==t._h&&H(t),t._h=1),!0===_?n=r:(u&&u.enter(),n=_(r),u&&(u.exit(),a=!0)),n===e.promise?s(N("Promise-chain cycle")):(o=L(n))?o.call(n,c,s):c(n)):s(r)}catch(t){u&&!a&&u.exit(),s(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&U(t)})}},U=function(t){A.call(c,function(){var e,n,r,i=t._v,o=x(t);if(o&&(e=I(function(){y?v.emit("unhandledRejection",i,t):(n=c.onunhandledrejection)?n({promise:t,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=y||x(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},x=function(t){return 1!==t._h&&0===(t._a||t._c).length},H=function(t){A.call(c,function(){var e;y?v.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})})},K=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},G=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw N("Promise can't be resolved itself");(e=L(t))?p(function(){var r={_w:n,_d:!1};try{e.call(t,s(G,r,1),s(K,r,1))}catch(t){K.call(r,t)}}):(n._v=t,n._s=1,M(n,!1))}catch(t){K.call({_w:n,_d:!1},t)}}};b||(D=function(t){C(this,D,R,"_h"),f(t),r.call(this);try{t(s(G,this,1),s(K,this,1))}catch(t){K.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(6065)(D.prototype,{then:function(t,e){var n=w(d(this,D));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=y?v.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=s(G,t,1),this.reject=s(K,t,1)},T.f=w=function(t){return t===D||t===a?new o(t):i(t)}),E(E.G+E.W+E.F*!b,{Promise:D}),n(3844)(D,R),n(5762)(R),a=n(6094)[R],E(E.S+E.F*!b,R,{reject:function(t){var e=w(this);return(0,e.reject)(t),e.promise}}),E(E.S+E.F*(_||!b),R,{resolve:function(t){return O(_&&this===a?D:this,t)}}),E(E.S+E.F*!(b&&n(8931)(function(t){D.all(t).catch(P)})),R,{all:function(t){var e=this,n=w(e),r=n.resolve,i=n.reject,o=I(function(){var n=[],o=0,a=1;h(t,!1,function(t){var _=o++,c=!1;n.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,n[_]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=w(e),r=n.reject,i=I(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},7087:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},7209:(t,e,n)=>{"use strict";if(n(1763)){var r=n(2750),i=n(7526),o=n(9448),a=n(2127),_=n(237),c=n(8032),s=n(5052),u=n(6440),E=n(1996),l=n(3341),f=n(6065),C=n(7087),h=n(1485),d=n(3133),A=n(157),p=n(3048),T=n(7917),I=n(4848),S=n(3305),O=n(8270),R=n(1508),N=n(4719),v=n(627),g=n(9415).f,m=n(762),D=n(4415),y=n(7574),P=n(6179),w=n(1464),b=n(9190),L=n(5165),M=n(906),U=n(8931),x=n(5762),H=n(5564),K=n(4438),G=n(7967),X=n(8641),Y=G.f,F=X.f,B=i.RangeError,j=i.TypeError,V=i.Uint8Array,k="ArrayBuffer",W="Shared"+k,J="BYTES_PER_ELEMENT",q="prototype",z=Array[q],Z=c.ArrayBuffer,$=c.DataView,Q=P(0),tt=P(2),et=P(3),nt=P(4),rt=P(5),it=P(6),ot=w(!0),at=w(!1),_t=L.values,ct=L.keys,st=L.entries,ut=z.lastIndexOf,Et=z.reduce,lt=z.reduceRight,ft=z.join,Ct=z.sort,ht=z.slice,dt=z.toString,At=z.toLocaleString,pt=y("iterator"),Tt=y("toStringTag"),It=D("typed_constructor"),St=D("def_constructor"),Ot=_.CONSTR,Rt=_.TYPED,Nt=_.VIEW,vt="Wrong length!",gt=P(1,function(t,e){return wt(b(t,t[St]),e)}),mt=o(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Dt=!!V&&!!V[q].set&&o(function(){new V(1).set({})}),yt=function(t,e){var n=C(t);if(n<0||n%e)throw B("Wrong offset!");return n},Pt=function(t){if(S(t)&&Rt in t)return t;throw j(t+" is not a typed array!")},wt=function(t,e){if(!S(t)||!(It in t))throw j("It is not a typed array constructor!");return new t(e)},bt=function(t,e){return Lt(b(t,t[St]),e)},Lt=function(t,e){for(var n=0,r=e.length,i=wt(t,r);r>n;)i[n]=e[n++];return i},Mt=function(t,e,n){Y(t,e,{get:function(){return this._d[n]}})},Ut=function(t){var e,n,r,i,o,a,_=O(t),c=arguments.length,u=c>1?arguments[1]:void 0,E=void 0!==u,l=m(_);if(null!=l&&!R(l)){for(a=l.call(_),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);_=r}for(E&&c>2&&(u=s(u,arguments[2],2)),e=0,n=h(_.length),i=wt(this,n);n>e;e++)i[e]=E?u(_[e],e):_[e];return i},xt=function(){for(var t=0,e=arguments.length,n=wt(this,e);e>t;)n[t]=arguments[t++];return n},Ht=!!V&&o(function(){At.call(new V(1))}),Kt=function(){return At.apply(Ht?ht.call(Pt(this)):Pt(this),arguments)},Gt={copyWithin:function(t,e){return K.call(Pt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Pt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return H.apply(Pt(this),arguments)},filter:function(t){return bt(this,tt(Pt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(Pt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Pt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Pt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return at(Pt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Pt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ft.apply(Pt(this),arguments)},lastIndexOf:function(t){return ut.apply(Pt(this),arguments)},map:function(t){return gt(Pt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return Et.apply(Pt(this),arguments)},reduceRight:function(t){return lt.apply(Pt(this),arguments)},reverse:function(){for(var t,e=this,n=Pt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return et(Pt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Ct.call(Pt(this),t)},subarray:function(t,e){var n=Pt(this),r=n.length,i=A(t,r);return new(b(n,n[St]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,h((void 0===e?r:A(e,r))-i))}},Xt=function(t,e){return bt(this,ht.call(Pt(this),t,e))},Yt=function(t){Pt(this);var e=yt(arguments[1],1),n=this.length,r=O(t),i=h(r.length),o=0;if(i+e>n)throw B(vt);for(;o<i;)this[e+o]=r[o++]},Ft={entries:function(){return st.call(Pt(this))},keys:function(){return ct.call(Pt(this))},values:function(){return _t.call(Pt(this))}},Bt=function(t,e){return S(t)&&t[Rt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},jt=function(t,e){return Bt(t,e=p(e,!0))?E(2,t[e]):F(t,e)},Vt=function(t,e,n){return!(Bt(t,e=p(e,!0))&&S(n)&&T(n,"value"))||T(n,"get")||T(n,"set")||n.configurable||T(n,"writable")&&!n.writable||T(n,"enumerable")&&!n.enumerable?Y(t,e,n):(t[e]=n.value,t)};Ot||(X.f=jt,G.f=Vt),a(a.S+a.F*!Ot,"Object",{getOwnPropertyDescriptor:jt,defineProperty:Vt}),o(function(){dt.call({})})&&(dt=At=function(){return ft.call(this)});var kt=f({},Gt);f(kt,Ft),l(kt,pt,Ft.values),f(kt,{slice:Xt,set:Yt,constructor:function(){},toString:dt,toLocaleString:Kt}),Mt(kt,"buffer","b"),Mt(kt,"byteOffset","o"),Mt(kt,"byteLength","l"),Mt(kt,"length","e"),Y(kt,Tt,{get:function(){return this[Rt]}}),t.exports=function(t,e,n,c){var s=t+((c=!!c)?"Clamped":"")+"Array",E="get"+t,f="set"+t,C=i[s],A=C||{},p=C&&v(C),T=!C||!_.ABV,O={},R=C&&C[q],m=function(t,n){Y(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[E](n*e+r.o,mt)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[f](n*e+i.o,r,mt)}(this,n,t)},enumerable:!0})};T?(C=n(function(t,n,r,i){u(t,C,s,"_d");var o,a,_,c,E=0,f=0;if(S(n)){if(!(n instanceof Z||(c=I(n))==k||c==W))return Rt in n?Lt(C,n):Ut.call(C,n);o=n,f=yt(r,e);var A=n.byteLength;if(void 0===i){if(A%e)throw B(vt);if((a=A-f)<0)throw B(vt)}else if((a=h(i)*e)+f>A)throw B(vt);_=a/e}else _=d(n),o=new Z(a=_*e);for(l(t,"_d",{b:o,o:f,l:a,e:_,v:new $(o)});E<_;)m(t,E++)}),R=C[q]=N(kt),l(R,"constructor",C)):o(function(){C(1)})&&o(function(){new C(-1)})&&U(function(t){new C,new C(null),new C(1.5),new C(t)},!0)||(C=n(function(t,n,r,i){var o;return u(t,C,s),S(n)?n instanceof Z||(o=I(n))==k||o==W?void 0!==i?new A(n,yt(r,e),i):void 0!==r?new A(n,yt(r,e)):new A(n):Rt in n?Lt(C,n):Ut.call(C,n):new A(d(n))}),Q(p!==Function.prototype?g(A).concat(g(p)):g(A),function(t){t in C||l(C,t,A[t])}),C[q]=R,r||(R.constructor=C));var D=R[pt],y=!!D&&("values"==D.name||null==D.name),P=Ft.values;l(C,It,!0),l(R,Rt,s),l(R,Nt,!0),l(R,St,C),(c?new C(1)[Tt]==s:Tt in R)||Y(R,Tt,{get:function(){return s}}),O[s]=C,a(a.G+a.W+a.F*(C!=A),O),a(a.S,s,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o(function(){A.of.call(C,1)}),s,{from:Ut,of:xt}),J in R||l(R,J,e),a(a.P,s,Gt),x(s),a(a.P+a.F*Dt,s,{set:Yt}),a(a.P+a.F*!y,s,Ft),r||R.toString==dt||(R.toString=dt),a(a.P+a.F*o(function(){new C(1).slice()}),s,{slice:Xt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new C([1,2]).toLocaleString()})||!o(function(){R.toLocaleString.call([1,2])})),s,{toLocaleString:Kt}),M[s]=y?D:P,r||y||l(R,pt,P)}}else t.exports=function(){}},7221:(t,e,n)=>{var r=n(1249),i=n(3344);t.exports=function(t){return r(i(t))}},7227:(t,e,n)=>{"use strict";var r=n(7967),i=n(1996);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},7368:(t,e,n)=>{var r=n(4228);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},7526:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},7574:(t,e,n)=>{var r=n(4556)("wks"),i=n(4415),o=n(7526).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},7917:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},7960:(t,e,n)=>{e.f=n(7574)},7967:(t,e,n)=>{var r=n(4228),i=n(2956),o=n(3048),a=Object.defineProperty;e.f=n(1763)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},7981:(t,e,n)=>{var r=n(5089);t.exports=Array.isArray||function(t){return"Array"==r(t)}},8032:(t,e,n)=>{"use strict";var r=n(7526),i=n(1763),o=n(2750),a=n(237),_=n(3341),c=n(6065),s=n(9448),u=n(6440),E=n(7087),l=n(1485),f=n(3133),C=n(9415).f,h=n(7967).f,d=n(5564),A=n(3844),p="ArrayBuffer",T="DataView",I="prototype",S="Wrong index!",O=r[p],R=r[T],N=r.Math,v=r.RangeError,g=r.Infinity,m=O,D=N.abs,y=N.pow,P=N.floor,w=N.log,b=N.LN2,L="buffer",M="byteLength",U="byteOffset",x=i?"_b":L,H=i?"_l":M,K=i?"_o":U;function G(t,e,n){var r,i,o,a=new Array(n),_=8*n-e-1,c=(1<<_)-1,s=c>>1,u=23===e?y(2,-24)-y(2,-77):0,E=0,l=t<0||0===t&&1/t<0?1:0;for((t=D(t))!=t||t===g?(i=t!=t?1:0,r=c):(r=P(w(t)/b),t*(o=y(2,-r))<1&&(r--,o*=2),(t+=r+s>=1?u/o:u*y(2,1-s))*o>=2&&(r++,o/=2),r+s>=c?(i=0,r=c):r+s>=1?(i=(t*o-1)*y(2,e),r+=s):(i=t*y(2,s-1)*y(2,e),r=0));e>=8;a[E++]=255&i,i/=256,e-=8);for(r=r<<e|i,_+=e;_>0;a[E++]=255&r,r/=256,_-=8);return a[--E]|=128*l,a}function X(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,_=i-7,c=n-1,s=t[c--],u=127&s;for(s>>=7;_>0;u=256*u+t[c],c--,_-=8);for(r=u&(1<<-_)-1,u>>=-_,_+=e;_>0;r=256*r+t[c],c--,_-=8);if(0===u)u=1-a;else{if(u===o)return r?NaN:s?-g:g;r+=y(2,e),u-=a}return(s?-1:1)*r*y(2,u-e)}function Y(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function F(t){return[255&t]}function B(t){return[255&t,t>>8&255]}function j(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function V(t){return G(t,52,8)}function k(t){return G(t,23,4)}function W(t,e,n){h(t[I],e,{get:function(){return this[n]}})}function J(t,e,n,r){var i=f(+n);if(i+e>t[H])throw v(S);var o=t[x]._b,a=i+t[K],_=o.slice(a,a+e);return r?_:_.reverse()}function q(t,e,n,r,i,o){var a=f(+n);if(a+e>t[H])throw v(S);for(var _=t[x]._b,c=a+t[K],s=r(+i),u=0;u<e;u++)_[c+u]=s[o?u:e-u-1]}if(a.ABV){if(!s(function(){O(1)})||!s(function(){new O(-1)})||s(function(){return new O,new O(1.5),new O(NaN),O.name!=p})){for(var z,Z=(O=function(t){return u(this,O),new m(f(t))})[I]=m[I],$=C(m),Q=0;$.length>Q;)(z=$[Q++])in O||_(O,z,m[z]);o||(Z.constructor=O)}var tt=new R(new O(2)),et=R[I].setInt8;tt.setInt8(0,2147483648),tt.setInt8(1,2147483649),!tt.getInt8(0)&&tt.getInt8(1)||c(R[I],{setInt8:function(t,e){et.call(this,t,e<<24>>24)},setUint8:function(t,e){et.call(this,t,e<<24>>24)}},!0)}else O=function(t){u(this,O,p);var e=f(t);this._b=d.call(new Array(e),0),this[H]=e},R=function(t,e,n){u(this,R,T),u(t,O,T);var r=t[H],i=E(e);if(i<0||i>r)throw v("Wrong offset!");if(i+(n=void 0===n?r-i:l(n))>r)throw v("Wrong length!");this[x]=t,this[K]=i,this[H]=n},i&&(W(O,M,"_l"),W(R,L,"_b"),W(R,M,"_l"),W(R,U,"_o")),c(R[I],{getInt8:function(t){return J(this,1,t)[0]<<24>>24},getUint8:function(t){return J(this,1,t)[0]},getInt16:function(t){var e=J(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=J(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return Y(J(this,4,t,arguments[1]))},getUint32:function(t){return Y(J(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return X(J(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return X(J(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){q(this,1,t,F,e)},setUint8:function(t,e){q(this,1,t,F,e)},setInt16:function(t,e){q(this,2,t,B,e,arguments[2])},setUint16:function(t,e){q(this,2,t,B,e,arguments[2])},setInt32:function(t,e){q(this,4,t,j,e,arguments[2])},setUint32:function(t,e){q(this,4,t,j,e,arguments[2])},setFloat32:function(t,e){q(this,4,t,k,e,arguments[2])},setFloat64:function(t,e){q(this,8,t,V,e,arguments[2])}});A(O,p),A(R,T),_(R[I],a.VIEW,!0),e[p]=O,e[T]=R},8175:(t,e,n)=>{"use strict";var r=n(2750),i=n(2127),o=n(8859),a=n(3341),_=n(906),c=n(6032),s=n(3844),u=n(627),E=n(7574)("iterator"),l=!([].keys&&"next"in[].keys()),f="keys",C="values",h=function(){return this};t.exports=function(t,e,n,d,A,p,T){c(n,e,d);var I,S,O,R=function(t){if(!l&&t in m)return m[t];switch(t){case f:case C:return function(){return new n(this,t)}}return function(){return new n(this,t)}},N=e+" Iterator",v=A==C,g=!1,m=t.prototype,D=m[E]||m["@@iterator"]||A&&m[A],y=D||R(A),P=A?v?R("entries"):y:void 0,w="Array"==e&&m.entries||D;if(w&&(O=u(w.call(new t)))!==Object.prototype&&O.next&&(s(O,N,!0),r||"function"==typeof O[E]||a(O,E,h)),v&&D&&D.name!==C&&(g=!0,y=function(){return D.call(this)}),r&&!T||!l&&!g&&m[E]||a(m,E,y),_[e]=y,_[N]=h,A)if(I={values:v?y:R(C),keys:p?y:R(f),entries:P},T)for(S in I)S in m||o(m,S,I[S]);else i(i.P+i.F*(l||g),e,I);return I}},8184:(t,e,n)=>{var r=n(7574)("unscopables"),i=Array.prototype;null==i[r]&&n(3341)(i,r,{}),t.exports=function(t){i[r][t]=!0}},8206:(t,e,n)=>{"use strict";var r=n(1311),i=n(1060),o=n(8449),a=n(8270),_=n(1249),c=Object.assign;t.exports=!c||n(9448)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r})?function(t,e){for(var n=a(t),c=arguments.length,s=1,u=i.f,E=o.f;c>s;)for(var l,f=_(arguments[s++]),C=u?r(f).concat(u(f)):r(f),h=C.length,d=0;h>d;)E.call(f,l=C[d++])&&(n[l]=f[l]);return n}:c},8249:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.r(e),n(2820),n(9650),n(8604),n(489),n(8305),n(4040),function(){if(!window.cadesplugin||!window.cadesplugin.LOG_LEVEL_DEBUG){var t,e,n,i=0,o=0,a=0,_=0,c=0,s=!!window.Promise,u=!1,E=!1,l={};s&&(l=new window.Promise(function(t,r){n=t,e=r}));var f,C,h,d=(h=(C=window.navigator.userAgent).match(/(opera|yabrowser|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(h[1])?{name:"IE",version:(f=/\brv[ :]+(\d+)/g.exec(C)||[])[1]||""}:"Chrome"===h[1]&&null!=(f=C.match(/\b(OPR|Edg|YaBrowser)\/(\d+)/))&&f.length>2?{name:f[1].replace("OPR","Opera"),version:f[2]}:(h=h[2]?[h[1],h[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"],null!=(f=C.match(/version\/(\d+)/i))&&h.splice(1,1,f[1]),{name:h[0],version:h[1]})),A={callbacksCount:1,callbacks:{},resultForCallback:function(t,e){var n=A.callbacks[t];n&&n.apply(null,e)},call:function(t,e,n){var r=n&&"function"==typeof n,i=r?A.callbacksCount++:0;r&&(A.callbacks[i]=n);var o=document.createElement("IFRAME"),a=new Array("_CPNP_handle");try{o.setAttribute("src","cpnp-js-call:"+t+":"+i+":"+encodeURIComponent(window.JSON.stringify(e,a)))}catch(t){window.alert(t)}document.documentElement.appendChild(o),o.parentNode.removeChild(o),o=null}};l.JSModuleVersion="2.4.1",l.async_spawn=function(t){function e(t,e){var o;try{o=n[t](e)}catch(t){return window.Promise.reject(t)}return o.done?o.value:window.Promise.resolve(o.value).then(r,i)}var n=t(Array.prototype.slice.call(arguments,1)),r=e.bind(e,"next"),i=e.bind(e,"throw");return r()},l.set=function(e){t=e},l.set_log_level=function(t){t===l.LOG_LEVEL_DEBUG||t===l.LOG_LEVEL_INFO||t===l.LOG_LEVEL_ERROR?(l.current_log_level=t,l.current_log_level===l.LOG_LEVEL_DEBUG&&p(l.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = DEBUG"),l.current_log_level===l.LOG_LEVEL_INFO&&p(l.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = INFO"),l.current_log_level===l.LOG_LEVEL_ERROR&&p(l.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = ERROR"),S()&&(l.current_log_level===l.LOG_LEVEL_DEBUG&&window.postMessage("set_log_level=debug","*"),l.current_log_level===l.LOG_LEVEL_INFO&&window.postMessage("set_log_level=info","*"),l.current_log_level===l.LOG_LEVEL_ERROR&&window.postMessage("set_log_level=error","*"))):p(l.LOG_LEVEL_ERROR,"cadesplugin_api.js: Incorrect log_level: "+t)},l.get_extension_version=function(t){window.postMessage("cadesplugin_extension_version_request","*"),window.addEventListener("message",function(e){if("string"==typeof e.data&&0===e.data.indexOf("cadesplugin_extension_version_response:")){var n=e.data.substring(39);t(n)}},!1)},l.get_extension_id=function(t){window.postMessage("cadesplugin_extension_id_request","*"),window.addEventListener("message",function(e){if("string"==typeof e.data&&0===e.data.indexOf("cadesplugin_extension_id_response:")){var n=e.data.substring(34);t(n)}},!1)},l.getLastError=function(e){if(S()||T()||I())return R(e);try{return t.getLastError()}catch(t){return R(e)}},l.is_capilite_enabled=function(){return void 0!==l.EnableInternalCSP&&l.EnableInternalCSP},S()&&(l.CreateObjectAsync=function(e){return t.CreateObjectAsync(e)},l.ReleasePluginObjects=function(){return cpcsp_chrome_nmcades.ReleasePluginObjects()}),S()||(l.CreateObject=O),l.CAPICOM_MEMORY_STORE=0,l.CAPICOM_LOCAL_MACHINE_STORE=1,l.CAPICOM_CURRENT_USER_STORE=2,l.CAPICOM_SMART_CARD_USER_STORE=4,l.CADESCOM_MEMORY_STORE=0,l.CADESCOM_LOCAL_MACHINE_STORE=1,l.CADESCOM_CURRENT_USER_STORE=2,l.CADESCOM_SMART_CARD_USER_STORE=4,l.CADESCOM_CONTAINER_STORE=100,l.CAPICOM_ROOT_STORE="Root",l.CAPICOM_CA_STORE="CA",l.CAPICOM_MY_STORE="My",l.CAPICOM_ADDRESSBOOK_STORE="AddressBook",l.CAPICOM_STORE_OPEN_READ_WRITE=1,l.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED=2,l.CAPICOM_STORE_OPEN_INCLUDE_ARCHIVED=256,l.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,l.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED=0,l.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING=1,l.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE=2,l.CADESCOM_XADES_DEFAULT=16,l.CADESCOM_XADES_BES=32,l.CADESCOM_XADES_T=80,l.CADESCOM_XADES_X_LONG_TYPE_1=1488,l.CADESCOM_XMLDSIG_TYPE=0,l.XmlDsigGost3410UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411",l.XmlDsigGost3411UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr3411",l.XmlDsigGost3410Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411",l.XmlDsigGost3411Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411",l.XmlDsigGost3411Url2012256="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-256",l.XmlDsigGost3410Url2012256="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-256",l.XmlDsigGost3411Url2012512="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-512",l.XmlDsigGost3410Url2012512="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-512",l.CADESCOM_CADES_DEFAULT=0,l.CADESCOM_CADES_BES=1,l.CADESCOM_CADES_T=5,l.CADESCOM_CADES_X_LONG_TYPE_1=93,l.CADESCOM_CADES_A=221,l.CADESCOM_PKCS7_TYPE=65535,l.CADESCOM_ENCODE_BASE64=0,l.CADESCOM_ENCODE_BINARY=1,l.CADESCOM_ENCODE_ANY=-1,l.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT=0,l.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN=1,l.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY=2,l.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME=0,l.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME=1,l.CAPICOM_CERTIFICATE_FIND_SHA1_HASH=0,l.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,l.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME=2,l.CAPICOM_CERTIFICATE_FIND_ROOT_NAME=3,l.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME=4,l.CAPICOM_CERTIFICATE_FIND_EXTENSION=5,l.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY=6,l.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY=7,l.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY=8,l.CAPICOM_CERTIFICATE_FIND_TIME_VALID=9,l.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID=10,l.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED=11,l.CAPICOM_CERTIFICATE_FIND_KEY_USAGE=12,l.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE=128,l.CAPICOM_PROPID_ENHKEY_USAGE=9,l.CAPICOM_OID_OTHER=0,l.CAPICOM_OID_KEY_USAGE_EXTENSION=10,l.CAPICOM_EKU_CLIENT_AUTH=2,l.CAPICOM_EKU_SMARTCARD_LOGON=5,l.CAPICOM_EKU_OTHER=0,l.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0,l.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1,l.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2,l.CADESCOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0,l.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1,l.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2,l.CADESCOM_AUTHENTICATED_ATTRIBUTE_MACHINE_INFO=256,l.CADESCOM_ATTRIBUTE_OTHER=-1,l.CADESCOM_STRING_TO_UCS2LE=0,l.CADESCOM_BASE64_TO_BINARY=1,l.CADESCOM_DISPLAY_DATA_NONE=0,l.CADESCOM_DISPLAY_DATA_CONTENT=1,l.CADESCOM_DISPLAY_DATA_ATTRIBUTE=2,l.CADESCOM_ENCRYPTION_ALGORITHM_RC2=0,l.CADESCOM_ENCRYPTION_ALGORITHM_RC4=1,l.CADESCOM_ENCRYPTION_ALGORITHM_DES=2,l.CADESCOM_ENCRYPTION_ALGORITHM_3DES=3,l.CADESCOM_ENCRYPTION_ALGORITHM_AES=4,l.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89=25,l.CADESCOM_ENCRYPTION_ALGORITHM_GOST_MAGMA=35,l.CADESCOM_ENCRYPTION_ALGORITHM_GOST_MAGMA_OMAC=36,l.CADESCOM_ENCRYPTION_ALGORITHM_GOST_KUZNYECHIK=45,l.CADESCOM_ENCRYPTION_ALGORITHM_GOST_KUZNYECHIK_OMAC=46,l.CADESCOM_HASH_ALGORITHM_SHA1=0,l.CADESCOM_HASH_ALGORITHM_MD2=1,l.CADESCOM_HASH_ALGORITHM_MD4=2,l.CADESCOM_HASH_ALGORITHM_MD5=3,l.CADESCOM_HASH_ALGORITHM_SHA_256=4,l.CADESCOM_HASH_ALGORITHM_SHA_384=5,l.CADESCOM_HASH_ALGORITHM_SHA_512=6,l.CADESCOM_HASH_ALGORITHM_CP_GOST_3411=100,l.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256=101,l.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512=102,l.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_HMAC=110,l.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256_HMAC=111,l.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512_HMAC=112,l.CADESCOM_CERT_INFO_ROLE=100,l.CADESCOM_ROLE_ROOT="ROOT",l.CADESCOM_ROLE_CA="CA",l.CADESCOM_ROLE_LEAF="LEAF",l.LOG_LEVEL_DEBUG=4,l.LOG_LEVEL_INFO=2,l.LOG_LEVEL_ERROR=1,l.CADESCOM_AllowNone=0,l.CADESCOM_AllowNoOutstandingRequest=1,l.CADESCOM_AllowUntrustedCertificate=2,l.CADESCOM_AllowUntrustedRoot=4,l.CADESCOM_SkipInstallToStore=268435456,l.CADESCOM_InstallCertChainToContainer=536870912,l.CADESCOM_UseContainerStore=1073741824,l.ContextNone=0,l.ContextUser=1,l.ContextMachine=2,l.ContextAdministratorForceMachine=3,l.ENABLE_CARRIER_TYPE_CSP=1,l.ENABLE_CARRIER_TYPE_FKC_NO_SM=2,l.ENABLE_CARRIER_TYPE_FKC_SM=4,l.ENABLE_ANY_CARRIER_TYPE=7,l.DISABLE_EVERY_CARRIER_OPERATION=0,l.ENABLE_CARRIER_OPEN_ENUM=1,l.ENABLE_CARRIER_CREATE=2,l.ENABLE_ANY_OPERATION=3,l.CADESCOM_PRODUCT_CSP=0,l.CADESCOM_PRODUCT_OCSP=1,l.CADESCOM_PRODUCT_TSP=2,l.MEDIA_TYPE_DEFAULT=0,l.MEDIA_TYPE_REGISTRY=1,l.MEDIA_TYPE_HDIMAGE=2,l.MEDIA_TYPE_CLOUD=4,l.MEDIA_TYPE_SCARD=8,l.XCN_CRYPT_STRING_BASE64HEADER=0,l.XCN_CRYPT_STRING_BASE64=1,l.XCN_CRYPT_STRING_BINARY=2,l.XCN_CRYPT_STRING_BASE64REQUESTHEADER=3,l.XCN_CRYPT_STRING_HEX=4,l.XCN_CRYPT_STRING_HEXASCII=5,l.XCN_CRYPT_STRING_BASE64_ANY=6,l.XCN_CRYPT_STRING_ANY=7,l.XCN_CRYPT_STRING_HEX_ANY=8,l.XCN_CRYPT_STRING_BASE64X509CRLHEADER=9,l.XCN_CRYPT_STRING_HEXADDR=10,l.XCN_CRYPT_STRING_HEXASCIIADDR=11,l.XCN_CRYPT_STRING_HEXRAW=12,l.XCN_CRYPT_STRING_BASE64URI=13,l.XCN_CRYPT_STRING_ENCODEMASK=255,l.XCN_CRYPT_STRING_CHAIN=256,l.XCN_CRYPT_STRING_TEXT=512,l.XCN_CRYPT_STRING_PERCENTESCAPE=134217728,l.XCN_CRYPT_STRING_HASHDATA=268435456,l.XCN_CRYPT_STRING_STRICT=536870912,l.XCN_CRYPT_STRING_NOCRLF=1073741824,l.XCN_CRYPT_STRING_NOCR=2147483648,l.XCN_CERT_NAME_STR_NONE=0,l.XCN_AT_NONE=0,l.XCN_AT_KEYEXCHANGE=1,l.XCN_AT_SIGNATURE=2,l.AT_KEYEXCHANGE=1,l.AT_SIGNATURE=2,l.CARRIER_FLAG_REMOVABLE=1,l.CARRIER_FLAG_UNIQUE=2,l.CARRIER_FLAG_PROTECTED=4,l.CARRIER_FLAG_FUNCTIONAL_CARRIER=8,l.CARRIER_FLAG_SECURE_MESSAGING=16,l.CARRIER_FLAG_ABLE_SET_KEY=32,l.CARRIER_FLAG_ABLE_VISUALISE_SIGNATURE=64,l.CARRIER_FLAG_VIRTUAL=128,l.CRYPT_MODE_CBCSTRICT=1,l.CRYPT_MODE_CNT=3,l.CRYPT_MODE_CBCRFC4357=31,l.CRYPT_MODE_CTR=32,l.CRYPT_MODE_MGM=33,l.CRYPT_MODE_GCM=34,l.CRYPT_MODE_OMAC_CTR=35,l.CRYPT_MODE_WRAP=36,l.CRYPT_MODE_WRAP_PAD=37,l.PKCS5_PADDING=1,l.RANDOM_PADDING=2,l.ZERO_PADDING=3,l.ISO10126_PADDING=4,l.ANSI_X923_PADDING=5,l.TLS_1_0_PADDING=6,l.ISO_IEC_7816_4_PADDING=7,l.CAPICOM_STORE_SAVE_AS_SERIALIZED=0,l.CAPICOM_STORE_SAVE_AS_PKCS7=1,l.CERT_TRUST_NO_ERROR=0,l.CERT_TRUST_IS_NOT_TIME_VALID=1,l.CERT_TRUST_IS_REVOKED=4,l.CERT_TRUST_IS_NOT_SIGNATURE_VALID=8,l.CERT_TRUST_IS_NOT_VALID_FOR_USAGE=16,l.CERT_TRUST_IS_UNTRUSTED_ROOT=32,l.CERT_TRUST_REVOCATION_STATUS_UNKNOWN=64,l.CERT_TRUST_IS_CYCLIC=128,l.CERT_TRUST_INVALID_EXTENSION=256,l.CERT_TRUST_INVALID_POLICY_CONSTRAINTS=512,l.CERT_TRUST_INVALID_BASIC_CONSTRAINTS=1024,l.CERT_TRUST_INVALID_NAME_CONSTRAINTS=2048,l.CERT_TRUST_HAS_NOT_SUPPORTED_NAME_CONSTRAINT=4096,l.CERT_TRUST_HAS_NOT_DEFINED_NAME_CONSTRAINT=8192,l.CERT_TRUST_HAS_NOT_PERMITTED_NAME_CONSTRAINT=16384,l.CERT_TRUST_HAS_EXCLUDED_NAME_CONSTRAINT=32768,l.CERT_TRUST_IS_OFFLINE_REVOCATION=16777216,l.CERT_TRUST_NO_ISSUANCE_CHAIN_POLICY=33554432,l.CERT_TRUST_IS_EXPLICIT_DISTRUST=67108864,l.CERT_TRUST_HAS_NOT_SUPPORTED_CRITICAL_EXT=134217728,l.CERT_TRUST_HAS_WEAK_SIGNATURE=1048576,l.XCN_CERT_NO_KEY_USAGE=0,l.XCN_CERT_DIGITAL_SIGNATURE_KEY_USAGE=128,l.XCN_CERT_NON_REPUDIATION_KEY_USAGE=64,l.XCN_CERT_KEY_ENCIPHERMENT_KEY_USAGE=32,l.XCN_CERT_DATA_ENCIPHERMENT_KEY_USAGE=16,l.XCN_CERT_KEY_AGREEMENT_KEY_USAGE=8,l.XCN_CERT_KEY_CERT_SIGN_KEY_USAGE=4,l.XCN_CERT_OFFLINE_CRL_SIGN_KEY_USAGE=2,l.XCN_CERT_CRL_SIGN_KEY_USAGE=2,l.XCN_CERT_ENCIPHER_ONLY_KEY_USAGE=1,l.XCN_CERT_DECIPHER_ONLY_KEY_USAGE=32768,l.CADESCOM_XADES_ACCEPT_ANY_ID_ATTR_NAMESPACE=1,l.CADES_USE_OCSP_AUTHORIZED_POLICY=131072,l.XCN_NCRYPT_NO_OPERATION=0,l.XCN_NCRYPT_CIPHER_OPERATION=1,l.XCN_NCRYPT_HASH_OPERATION=2,l.XCN_NCRYPT_ASYMMETRIC_ENCRYPTION_OPERATION=4,l.XCN_NCRYPT_SECRET_AGREEMENT_OPERATION=8,l.XCN_NCRYPT_SIGNATURE_OPERATION=16,l.XCN_NCRYPT_RNG_OPERATION=32,l.XCN_CRYPT_ANY_GROUP_ID=0,l.XCN_CRYPT_HASH_ALG_OID_GROUP_ID=1,l.XCN_CRYPT_ENCRYPT_ALG_OID_GROUP_ID=2,l.XCN_CRYPT_PUBKEY_ALG_OID_GROUP_ID=3,l.XCN_CRYPT_SIGN_ALG_OID_GROUP_ID=4,l.XCN_CRYPT_RDN_ATTR_OID_GROUP_ID=5,l.XCN_CRYPT_EXT_OR_ATTR_OID_GROUP_ID=6,l.XCN_CRYPT_ENHKEY_USAGE_OID_GROUP_ID=7,l.XCN_CRYPT_POLICY_OID_GROUP_ID=8,l.XCN_CRYPT_TEMPLATE_OID_GROUP_ID=9,l.XCN_CRYPT_OID_INFO_PUBKEY_ANY=0,l.XCN_CRYPT_OID_INFO_PUBKEY_SIGN_KEY_FLAG=2147483648,l.XCN_CRYPT_OID_INFO_PUBKEY_ENCRYPT_KEY_FLAG=1073741824,l.CONTROL_KEY_TIME_VALIDITY_DISABLED=0,l.CONTROL_KEY_TIME_VALIDITY_ENABLED=1,l.CONTROL_KEY_TIME_VALIDITY_STRICT=2,l.AlgorithmFlagsNone=0,l.AlgorithmFlagsWrap=1,l.current_log_level=l.LOG_LEVEL_ERROR,window.cadesplugin=l,_&&document.hidden?document.addEventListener("visibilitychange",function t(e){!1===document.hidden&&(document.removeEventListener("visibilitychange",t),L(),b())}):(L(),b())}function p(t,e){"undefined"!=typeof console&&t<=l.current_log_level&&(t===l.LOG_LEVEL_DEBUG&&console.log("DEBUG: %s",e),t===l.LOG_LEVEL_INFO&&console.info("INFO: %s",e),t===l.LOG_LEVEL_ERROR&&console.error("ERROR: %s",e))}function T(){return"IE"===d.name||"MSIE"===d.name}function I(){return window.navigator.userAgent.match(/ipod/i)||window.navigator.userAgent.match(/ipad/i)||window.navigator.userAgent.match(/iphone/i)}function S(){return!T()&&("Edg"===d.name||("YaBrowser"===d.name?(c=!0,!0):"Opera"===d.name?(o=!0,d.version>=33):"Firefox"===d.name?(a=!0,d.version>=52):"Chrome"===d.name?d.version>=42:"Safari"===d.name?(_=!0,d.version>=12):void 0))}function O(e){if(I())return function(t,e){var n;if(A.call("CreateObject",e,function(t,e){n=t;var r="";try{r=window.JSON.parse(e)}catch(t){r=e}"string"==typeof r&&(r=(r=r.replace(/\\\n/gm,"\n")).replace(/\\\r/gm,"\r"))}),n)throw n}(0,[e]);if(T()){if(e.match(/X509Enrollment/i))try{return document.getElementById("webClassFactory").CreateObject(e)}catch(t){try{return document.getElementById("certEnrollClassFactory").CreateObject(e)}catch(t){throw"Для создания обьектов X509Enrollment следует настроить веб-узел на использование проверки подлинности по протоколу HTTPS"}}try{return document.getElementById("webClassFactory").CreateObject(e)}catch(t){return new window.ActiveXObject(e)}}return t.CreateObject(e)}function R(t){var e,n=t.message;return n?t.number&&(n+=" (0x"+((e=t.number)<0&&(e=4294967295+e+1),e.toString(16).toUpperCase()+")")):n=t,n}function N(){window.cadesplugin_extension_loaded_callback&&window.cadesplugin_extension_loaded_callback(),E=!0,cpcsp_chrome_nmcades.check_chrome_plugin(D,y)}function v(t,e,n){var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",t),r.onerror=n,r.onload=e,document.getElementsByTagName("head")[0].appendChild(r)}function g(){T()||a||_||window.cadesplugin_extension_loaded_callback&&window.cadesplugin_extension_loaded_callback(),window.postMessage("cadesplugin_echo_request","*"),window.addEventListener("message",function(t){if("string"==typeof t.data&&t.data.match("cadesplugin_loaded")&&!u){if(a||_){var e=t.data.substring(t.data.indexOf("url:")+4);if(!e.match("^(moz|safari)-extension://[a-zA-Z0-9/_-]+/nmcades_plugin_api.js$"))return p(l.LOG_LEVEL_ERROR,'Bad url "'+e+'" for load CryptoPro Extension for CAdES Browser plug-in'),void y();v(e,N,y)}else cpcsp_chrome_nmcades.check_chrome_plugin(D,y);u=!0}},!1)}function m(){var e=document.createElement("object");if(e.setAttribute("id","cadesplugin_object"),e.setAttribute("type","application/x-cades"),e.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(e),t=document.getElementById("cadesplugin_object"),T()){var n=document.createElement("object");n.setAttribute("id","certEnrollClassFactory"),n.setAttribute("classid","clsid:884e2049-217d-11da-b2a4-000e7bbb2b09"),n.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(n);var r=document.createElement("object");r.setAttribute("id","webClassFactory"),r.setAttribute("classid","clsid:B04C8637-10BD-484E-B0DA-B8A039F60024"),r.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(r)}}function D(){i=1,s?n():window.postMessage("cadesplugin_loaded","*")}function y(t){void 0!==t&&"object"!==r(t)||(t="Плагин недоступен"),i=1,s?e(t):window.postMessage("cadesplugin_load_error","*")}function P(){1!==i&&(a&&!E&&function(){if(!window.cadesplugin_skip_extension_install){var t=document.createElement("div");t.id="cadesplugin_ovr",t.style="visibility: hidden; position: fixed; left: 0; top: 0; width:100%; height:100%; background-color: rgba(0,0,0,0.7)",t.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; max-width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button><p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо расширение для браузера. Убедитесь, что оно у Вас включено или установите его.<p><a href='https://www.cryptopro.ru/sites/default/files/products/cades/extensions/firefox_cryptopro_extension_latest.xpi'>Скачать расширение</a></p></div>",document.getElementsByTagName("Body")[0].appendChild(t),document.getElementById("cadesplugin_close_install").addEventListener("click",function(){y("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"}),t.addEventListener("click",function(){y("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"}),t.style.visibility="visible"}}(),i=1,s?e("Истекло время ожидания загрузки плагина"):window.postMessage("cadesplugin_load_error","*"))}function w(){try{O("CAdESCOM.About"),D()}catch(e){document.getElementById("cadesplugin_object").style.display="none";var t=window.navigator.mimeTypes["application/x-cades"];y(t?t.enabledPlugin?"Плагин загружен, но не создаются обьекты":"Ошибка при загрузке плагина":"Плагин недоступен")}}function b(){var t=document.createElement("div");t.innerHTML="\x3c!--[if lt IE 9]><i></i><![endif]--\x3e",1===t.getElementsByTagName("i").length?y("Internet Explorer версии 8 и ниже не поддерживается"):S()?function(){if(a||_)g();else{var t="chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js",e="chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js",n="chrome-extension://pfhgbfnnjiafkhfdkmpiflachepdcjod/nmcades_plugin_api.js";c?v(t,g,function(){v(e,g,function(){v(n,g,y)})}):o?v(t,g,y):v(e,g,function(){v(n,g,y)})}}():s?"complete"===document.readyState?(m(),w()):window.addEventListener("load",function(t){m(),w()},!1):window.addEventListener("message",function(t){"cadesplugin_echo_request"===t.data&&(m(),w())},!1)}function L(){window.cadesplugin_load_timeout?window.setTimeout(P,window.cadesplugin_load_timeout):window.setTimeout(P,2e4)}}()},8270:(t,e,n)=>{var r=n(3344);t.exports=function(t){return Object(r(t))}},8301:(t,e,n)=>{var r=n(7526),i=n(8880),o=n(7967).f,a=n(9415).f,_=n(5411),c=n(1158),s=r.RegExp,u=s,E=s.prototype,l=/a/g,f=/a/g,C=new s(l)!==l;if(n(1763)&&(!C||n(9448)(function(){return f[n(7574)("match")]=!1,s(l)!=l||s(f)==f||"/a/i"!=s(l,"i")}))){s=function(t,e){var n=this instanceof s,r=_(t),o=void 0===e;return!n&&r&&t.constructor===s&&o?t:i(C?new u(r&&!o?t.source:t,e):u((r=t instanceof s)?t.source:t,r&&o?c.call(t):e),n?this:E,s)};for(var h=function(t){t in s||o(s,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},d=a(u),A=0;d.length>A;)h(d[A++]);E.constructor=s,s.prototype=E,n(8859)(r,"RegExp",s)}n(5762)("RegExp")},8305:(t,e,n)=>{"use strict";var r=n(4228),i=n(8270),o=n(1485),a=n(7087),_=n(8828),c=n(2535),s=Math.max,u=Math.min,E=Math.floor,l=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,C=function(t){return void 0===t?t:String(t)};n(9228)("replace",2,function(t,e,n,h){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=h(n,t,this,e);if(i.done)return i.value;var E=r(t),l=String(this),f="function"==typeof e;f||(e=String(e));var A=E.global;if(A){var p=E.unicode;E.lastIndex=0}for(var T=[];;){var I=c(E,l);if(null===I)break;if(T.push(I),!A)break;""===String(I[0])&&(E.lastIndex=_(l,o(E.lastIndex),p))}for(var S="",O=0,R=0;R<T.length;R++){I=T[R];for(var N=String(I[0]),v=s(u(a(I.index),l.length),0),g=[],m=1;m<I.length;m++)g.push(C(I[m]));var D=I.groups;if(f){var y=[N].concat(g,v,l);void 0!==D&&y.push(D);var P=String(e.apply(void 0,y))}else P=d(N,l,v,g,D,e);v>=O&&(S+=l.slice(O,v)+P,O=v+N.length)}return S+l.slice(O)}];function d(t,e,r,o,a,_){var c=r+t.length,s=o.length,u=f;return void 0!==a&&(a=i(a),u=l),n.call(_,u,function(n,i){var _;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":_=a[i.slice(1,-1)];break;default:var u=+i;if(0===u)return n;if(u>s){var l=E(u/10);return 0===l?n:l<=s?void 0===o[l-1]?i.charAt(1):o[l-1]+i.charAt(1):n}_=o[u-1]}return void 0===_?"":_})}})},8449:(t,e)=>{e.f={}.propertyIsEnumerable},8604:(t,e,n)=>{"use strict";n(9638);var r=n(4228),i=n(1158),o=n(1763),a="toString",_=/./[a],c=function(t){n(8859)(RegExp.prototype,a,t,!0)};n(9448)(function(){return"/a/b"!=_.call({source:"a",flags:"b"})})?c(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):_.name!=a&&c(function(){return _.call(this)})},8641:(t,e,n)=>{var r=n(8449),i=n(1996),o=n(7221),a=n(3048),_=n(7917),c=n(2956),s=Object.getOwnPropertyDescriptor;e.f=n(1763)?s:function(t,e){if(t=o(t),e=a(e,!0),c)try{return s(t,e)}catch(t){}if(_(t,e))return i(!r.f.call(t,e),t[e])}},8647:(t,e,n)=>{var r=n(8270),i=n(1311);n(923)("keys",function(){return function(t){return i(r(t))}})},8790:(t,e,n)=>{var r=n(5052),i=n(7368),o=n(1508),a=n(4228),_=n(1485),c=n(762),s={},u={},E=t.exports=function(t,e,n,E,l){var f,C,h,d,A=l?function(){return t}:c(t),p=r(n,E,e?2:1),T=0;if("function"!=typeof A)throw TypeError(t+" is not iterable!");if(o(A)){for(f=_(t.length);f>T;T++)if((d=e?p(a(C=t[T])[0],C[1]):p(t[T]))===s||d===u)return d}else for(h=A.call(t);!(C=h.next()).done;)if((d=i(h,p,C.value,e))===s||d===u)return d};E.BREAK=s,E.RETURN=u},8828:(t,e,n)=>{"use strict";var r=n(1212)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},8859:(t,e,n)=>{var r=n(7526),i=n(3341),o=n(7917),a=n(4415)("src"),_="toString",c=Function[_],s=(""+c).split(_);n(6094).inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,_){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:s.join(String(e)))),t===r?t[e]=n:_?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,_,function(){return"function"==typeof this&&this[a]||c.call(this)})},8880:(t,e,n)=>{var r=n(3305),i=n(5170).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},8931:(t,e,n)=>{var r=n(7574)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},9190:(t,e,n)=>{var r=n(4228),i=n(3387),o=n(7574)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},9228:(t,e,n)=>{"use strict";n(4116);var r=n(8859),i=n(3341),o=n(9448),a=n(3344),_=n(7574),c=n(9600),s=_("species"),u=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),E=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var l=_(t),f=!o(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)}),C=f?!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[s]=function(){return n}),n[l](""),!e}):void 0;if(!f||!C||"replace"===t&&!u||"split"===t&&!E){var h=/./[l],d=n(a,l,""[t],function(t,e,n,r,i){return e.exec===c?f&&!i?{done:!0,value:h.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),A=d[0],p=d[1];r(String.prototype,t,A),i(RegExp.prototype,l,2==e?function(t,e){return p.call(t,this,e)}:function(t){return p.call(t,this)})}}},9415:(t,e,n)=>{var r=n(4561),i=n(6140).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},9448:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9600:(t,e,n)=>{"use strict";var r,i,o=n(1158),a=RegExp.prototype.exec,_=String.prototype.replace,c=a,s="lastIndex",u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r[s]||0!==i[s]),E=void 0!==/()??/.exec("")[1];(u||E)&&(c=function(t){var e,n,r,i,c=this;return E&&(n=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),u&&(e=c[s]),r=a.call(c,t),u&&r&&(c[s]=c.global?r.index+r[0].length:e),E&&r&&r.length>1&&_.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=c},9638:(t,e,n)=>{n(1763)&&"g"!=/./g.flags&&n(7967).f(RegExp.prototype,"flags",{configurable:!0,get:n(1158)})},9650:(t,e,n)=>{"use strict";var r=n(7526),i=n(7917),o=n(1763),a=n(2127),_=n(8859),c=n(2988).KEY,s=n(9448),u=n(4556),E=n(3844),l=n(4415),f=n(7574),C=n(7960),h=n(5392),d=n(5969),A=n(7981),p=n(4228),T=n(3305),I=n(7221),S=n(3048),O=n(1996),R=n(4719),N=n(4765),v=n(8641),g=n(7967),m=n(1311),D=v.f,y=g.f,P=N.f,w=r.Symbol,b=r.JSON,L=b&&b.stringify,M="prototype",U=f("_hidden"),x=f("toPrimitive"),H={}.propertyIsEnumerable,K=u("symbol-registry"),G=u("symbols"),X=u("op-symbols"),Y=Object[M],F="function"==typeof w,B=r.QObject,j=!B||!B[M]||!B[M].findChild,V=o&&s(function(){return 7!=R(y({},"a",{get:function(){return y(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=D(Y,e);r&&delete Y[e],y(t,e,n),r&&t!==Y&&y(Y,e,r)}:y,k=function(t){var e=G[t]=R(w[M]);return e._k=t,e},W=F&&"symbol"==typeof w.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof w},J=function(t,e,n){return t===Y&&J(X,e,n),p(t),e=S(e,!0),p(n),i(G,e)?(n.enumerable?(i(t,U)&&t[U][e]&&(t[U][e]=!1),n=R(n,{enumerable:O(0,!1)})):(i(t,U)||y(t,U,O(1,{})),t[U][e]=!0),V(t,e,n)):y(t,e,n)},q=function(t,e){p(t);for(var n,r=d(e=I(e)),i=0,o=r.length;o>i;)J(t,n=r[i++],e[n]);return t},z=function(t){var e=H.call(this,t=S(t,!0));return!(this===Y&&i(G,t)&&!i(X,t))&&(!(e||!i(this,t)||!i(G,t)||i(this,U)&&this[U][t])||e)},Z=function(t,e){if(t=I(t),e=S(e,!0),t!==Y||!i(G,e)||i(X,e)){var n=D(t,e);return!n||!i(G,e)||i(t,U)&&t[U][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=P(I(t)),r=[],o=0;n.length>o;)i(G,e=n[o++])||e==U||e==c||r.push(e);return r},Q=function(t){for(var e,n=t===Y,r=P(n?X:I(t)),o=[],a=0;r.length>a;)!i(G,e=r[a++])||n&&!i(Y,e)||o.push(G[e]);return o};F||(_((w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor!");var t=l(arguments.length>0?arguments[0]:void 0),e=function(n){this===Y&&e.call(X,n),i(this,U)&&i(this[U],t)&&(this[U][t]=!1),V(this,t,O(1,n))};return o&&j&&V(Y,t,{configurable:!0,set:e}),k(t)})[M],"toString",function(){return this._k}),v.f=Z,g.f=J,n(9415).f=N.f=$,n(8449).f=z,n(1060).f=Q,o&&!n(2750)&&_(Y,"propertyIsEnumerable",z,!0),C.f=function(t){return k(f(t))}),a(a.G+a.W+a.F*!F,{Symbol:w});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)f(tt[et++]);for(var nt=m(f.store),rt=0;nt.length>rt;)h(nt[rt++]);a(a.S+a.F*!F,"Symbol",{for:function(t){return i(K,t+="")?K[t]:K[t]=w(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in K)if(K[e]===t)return e},useSetter:function(){j=!0},useSimple:function(){j=!1}}),a(a.S+a.F*!F,"Object",{create:function(t,e){return void 0===e?R(t):q(R(t),e)},defineProperty:J,defineProperties:q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),b&&a(a.S+a.F*(!F||s(function(){var t=w();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(T(e)||void 0!==t)&&!W(t))return A(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,L.apply(b,r)}}),w[M][x]||n(3341)(w[M],x,w[M].valueOf),E(w,"Symbol"),E(Math,"Math",!0),E(r.JSON,"JSON",!0)},9668:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=__webpack_require__.g);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(t){return function(e){return new Sha1(!0).update(e)[t]()}},createMethod=function(){var t=createOutputMethod("hex");NODE_JS&&(t=nodeWrap(t)),t.create=function(){return new Sha1},t.update=function(e){return t.create().update(e)};for(var e=0;e<OUTPUT_TYPES.length;++e){var n=OUTPUT_TYPES[e];t[n]=createOutputMethod(n)}return t},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(t){if("string"==typeof t)return crypto.createHash("sha1").update(t,"utf8").digest("hex");if(t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(void 0===t.length)return method(t);return crypto.createHash("sha1").update(new Buffer(t)).digest("hex")};return nodeMethod};function Sha1(t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(t){if(!this.finalized){var e="string"!=typeof t;e&&t.constructor===root.ArrayBuffer&&(t=new Uint8Array(t));for(var n,r,i=0,o=t.length||0,a=this.blocks;i<o;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(r=this.start;i<o&&r<64;++i)a[r>>2]|=t[i]<<SHIFT[3&r++];else for(r=this.start;i<o&&r<64;++i)(n=t.charCodeAt(i))<128?a[r>>2]|=n<<SHIFT[3&r++]:n<2048?(a[r>>2]|=(192|n>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):n<55296||n>=57344?(a[r>>2]|=(224|n>>12)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++i)),a[r>>2]|=(240|n>>18)<<SHIFT[3&r++],a[r>>2]|=(128|n>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=a[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var t,e,n=this.h0,r=this.h1,i=this.h2,o=this.h3,a=this.h4,_=this.blocks;for(t=16;t<80;++t)e=_[t-3]^_[t-8]^_[t-14]^_[t-16],_[t]=e<<1|e>>>31;for(t=0;t<20;t+=5)n=(e=(r=(e=(i=(e=(o=(e=(a=(e=n<<5|n>>>27)+(r&i|~r&o)+a+1518500249+_[t]|0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|~n&i)+o+1518500249+_[t+1]|0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|~a&r)+i+1518500249+_[t+2]|0)<<5|i>>>27)+(o&(a=a<<30|a>>>2)|~o&n)+r+1518500249+_[t+3]|0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|~i&a)+n+1518500249+_[t+4]|0,i=i<<30|i>>>2;for(;t<40;t+=5)n=(e=(r=(e=(i=(e=(o=(e=(a=(e=n<<5|n>>>27)+(r^i^o)+a+1859775393+_[t]|0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^i)+o+1859775393+_[t+1]|0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+i+1859775393+_[t+2]|0)<<5|i>>>27)+(o^(a=a<<30|a>>>2)^n)+r+1859775393+_[t+3]|0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^a)+n+1859775393+_[t+4]|0,i=i<<30|i>>>2;for(;t<60;t+=5)n=(e=(r=(e=(i=(e=(o=(e=(a=(e=n<<5|n>>>27)+(r&i|r&o|i&o)+a-1894007588+_[t]|0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|n&i|r&i)+o-1894007588+_[t+1]|0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|a&r|n&r)+i-1894007588+_[t+2]|0)<<5|i>>>27)+(o&(a=a<<30|a>>>2)|o&n|a&n)+r-1894007588+_[t+3]|0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|i&a|o&a)+n-1894007588+_[t+4]|0,i=i<<30|i>>>2;for(;t<80;t+=5)n=(e=(r=(e=(i=(e=(o=(e=(a=(e=n<<5|n>>>27)+(r^i^o)+a-899497514+_[t]|0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^i)+o-899497514+_[t+1]|0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+i-899497514+_[t+2]|0)<<5|i>>>27)+(o^(a=a<<30|a>>>2)^n)+r-899497514+_[t+3]|0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^a)+n-899497514+_[t+4]|0,i=i<<30|i>>>2;this.h0=this.h0+n|0,this.h1=this.h1+r|0,this.h2=this.h2+i|0,this.h3=this.h3+o|0,this.h4=this.h4+a|0},Sha1.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.amdO={},__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";function t(){}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CryptoPro:()=>d,DN:()=>e,JaCarta:()=>_,JaCarta2:()=>E,RuToken:()=>S}),__webpack_require__(738),__webpack_require__(8305),t.prototype.toString=function(){var t="";for(var e in this)this.hasOwnProperty(e)&&(t+=e+'="'+this[e].replace(/"/g,"'")+'", ');return t};const e=t;__webpack_require__(4040),__webpack_require__(8301),__webpack_require__(4702),__webpack_require__(8604),__webpack_require__(6517);const n={CKR_CANCEL:"пользователь отказался от выполнения операции.",CKR_HOST_MEMORY:"недостаточно памяти для выполнения функции.",CKR_SLOT_ID_INVALID:"неправильный идентификатор слота.",CKR_GENERAL_ERROR:"Критическая ошибка, связанная с аппаратным обеспечением; Неудачная попытка проверки пути сертификации.",CKR_FUNCTION_FAILED:"при выполнении функции возник сбой.",CKR_ARGUMENTS_BAD:"недопустимый аргумент.",CKR_ATTRIBUTE_READ_ONLY:"предпринята попытка присвоения значения атрибуту, который нельзя изменять.",CKR_ATTRIBUTE_TYPE_INVALID:"некорректный тип атрибута.",CKR_ATTRIBUTE_VALUE_INVALID:"атрибут нулевой длины.",CKR_DEVICE_ERROR:"ошибка при обращении к устройству или слоту.",CKR_DEVICE_MEMORY:"для выполнения функции недостаточно памяти в устройстве.",CKR_FUNCTION_CANCELED:"время ожидания выполнения функции истекло.",CKR_KEY_HANDLE_INVALID:"функции передан некорректный дескриптор ключа.",CKR_KEY_SIZE_RANGE:"недопустимый размер ключа.",CKR_KEY_TYPE_INCONSISTENT:"данный тип ключа не может использоваться с данным механизмом.",CKR_MECHANISM_INVALID:"при выполнении криптографической функции был указан неправильный механизм.",CKR_MECHANISM_PARAM_INVALID:"при выполнении криптографической функции были заданы некорректные параметры механизма.",CKR_OBJECT_HANDLE_INVALID:"функции передан некорректный дескриптор объекта.",CKR_OPERATION_ACTIVE:"одна или несколько выполняющихся операций препятствуют выполнению новой операции.",CKR_OPERATION_NOT_INITIALIZED:"выполнение операции без предварительного указания параметров невозможно.",CKR_PIN_INCORRECT:"функции передан неверный PIN-код.",CKR_PIN_LEN_RANGE:"недопустимая длина PIN-кода.",CKR_PIN_LOCKED:"PIN-код заблокирован.",CKR_SESSION_HANDLE_INVALID:"функции передан некорректный дескриптор сессии.",CKR_SESSION_PARALLEL_NOT_SUPPORTED:"невозможно открыть параллельную сессию.",CKR_SESSION_EXISTS:"уже открыта сессия работы с тем же устройством.",CKR_SESSION_READ_ONLY_EXISTS:"сессия открыта только для чтения. Смена режима невозможна.",CKR_SESSION_READ_WRITE_SO_EXISTS:"открыта сессия чтения/записи. Открыть сеанс только для чтения невозможно.",CKR_SIGNATURE_INVALID:"неправильное значение электронной подписи.",CKR_TEMPLATE_INCOMPLETE:"для создания объекта недостаточно атрибутов.",CKR_TOKEN_NOT_PRESENT:"в момент выполнения функции устройство было отключено.",CKR_TOKEN_WRITE_PROTECTED:"устройство недоступно для записи.",CKR_USER_ALREADY_LOGGED_IN:"пользователь уже предъявил PIN-код.",CKR_USER_NOT_LOGGED_IN:"функция не может быть выполнена в гостевом режиме работы устройства.",CKR_USER_PIN_NOT_INITIALIZED:"начальное значение PIN-кода не установлено.",CKR_USER_TYPE_INVALID:"функция не может быть выполнена в текущем режиме работы устройства.",CKR_USER_ANOTHER_ALREADY_LOGGED_IN:"невозможно переключение из режима администратора в режим пользователя или обратно.",CKR_BUFFER_TOO_SMALL:"размер заданного буфера является недостаточным для сохранения результатов функции.",CKR_INFORMATION_SENSITIVE:"запрашиваемый объект недоступен для чтения.",CKR_CRYPTOKI_NOT_INITIALIZED:"выполнение функции без инициализации Единой библиотеки PKCS#11 (библиотеки Cryptoki) невозможно.",CKR_CRYPTOKI_ALREADY_INITIALIZED:"попытка повторно инициализировать библиотеку Cryptoki.",CKR_FUNCTION_REJECTED:"пользователь отменил операцию.",NOT_STATE_TOKEN_BINDED:"значение параметра state отличается от STATE_TOKEN_BINDED (1).",NOT_STATE_NOT_BINDED:"значение параметра state отличается от STATE_TOKEN_BINDED (0).",IS_STATE_NOT_BINDED:"параметр state принимает значение STATE_TOKEN_BINDED (0).",NOT_STATE_UNILATERAL_AUTHENTICATION_IN_PROGRESS:"значение параметра state отличается от STATE_TOKEN_BINDED (4).",NOT_STATE_SECURE_CHANNEL_CONNECTION_IN_PROGRESS:"значение параметра state отличается от STATE_TOKEN_BINDED (2).",NOT_STATE_SECURE_CHANNEL_ESTABLISHED:"значение параметра state отличается от STATE_TOKEN_BINDED (3).",CERTIFICATE_NOT_FOUND:"сертификат не обнаружен.",PUBLIC_KEY_NOT_FOUND:"открытый ключ не обнаружен в памяти поддерживаемого устройства.",SERVER_PUBLIC_KEY_NOT_FOUND:"не найден открытый ключ сервера.",INVALID_SERVER_PUBLIC_KEY:"неверный открытый ключ сервера.",DATA_TO_SIGN_ZERO_LENGTH:"на подпись были представлены данные, имеющие нулевую длину.",DATA_TO_VERIFY_ZERO_LENGTH:"на проверку подписи были представлены данные, имеющие нулевую длину.",SIGNATURE_TO_VERIFY_ZERO_LENGTH:"на проверку была представлена подпись, имеющая нулевую длину.",INVALID_EC_PARAMS:"неверно заданы параметры криптографических преобразований по ГОСТ Р 34.10-2001.",TOKEN_MEMORY_TOO_SMALL:"для выполнения операции в поддерживаемом устройстве недостаточно свободной памяти.",KEY_SIZE_NOT_64:"длина ключа не равна 64 битам.",CERT_NOT_MATCH_PUBLIC_KEY:"сертификат не соответствует открытому ключу.",FAILED_CHECK_BROWSER_VERS:"ошибка проверки версии используемого браузера.",BROWSER_VERS_NOT_SUPPORTED:"используемая версия браузера не поддерживается.",INVALID_USER_TYPE:"неверно указан тип PIN-кода.",PINS_NOT_MATCH:"введённые значения нового PIN-кода неодинаковы.",USER_CHANGE_ADMIN_PIN_NOT_STATE_NOT_BINDED:"cмена PIN-кода администратора невозможна, поскольку значение параметра state отличается от STATE_TOKEN_BINDED (0).",SSL_ERR_GEN_SESSION_KEY:"ошибка при генерации ключа защиты данных, передаваемых между клиентом и сервером.",SSL_ERR_GOST_ENGINE:"ошибка средства защиты, программно выполняющего криптографические преобразования на стороне клиента.",SSL_ERR_SSL_NEW:"ошибка в начале выполнения протокола Handshake.",SSL_ERR_CONNECT:"ошибка при выполнении протокола Handshake.",SSL_ERR_SSL_WRITE:"ошибка при подготовке данных к защищённой передаче.",SSL_ERR_SSL_READ:"ошибка при чтении защищённых для передачи данных.",SSL_ERR_LOAD_CERT_AND_KEY_FROM_TOKEN:"ошибка при попытке считать сертификат и открытый ключ из памяти поддерживаемого устройства.",SSL_ERR_GET_PEER_PUBLIC_KEY:"ошибка при получении открытого ключа сервера.",CERT_PARS_ERR_GET_PUBLIC_KEY:"не удалось считать открытый ключ из сертификата.",CERT_PARS_ERR_GET_ISSUER_AND_SER_NUMBER:"не удалось считать имя удостоверяющего центра и серийный номер из сертификата.",UNKNOWN_ERROR:"неизвестная ошибка."};__webpack_require__(341),__webpack_require__(5144),__webpack_require__(5890),__webpack_require__(5165),__webpack_require__(8647);var r=[{oid:"1.2.643.3.131.1.1",short:"INN",full:"ИНН"},{oid:"1.2.643.100.4",short:"INNLE",full:"ИНН ЮЛ"},{oid:"1.2.643.100.1",short:"OGRN",full:"ОГРН"},{oid:"1.2.643.100.5",short:"OGRNIP",full:"ОГРНИП"},{oid:"1.2.643.100.3",short:"SNILS",full:"СНИЛС"},{oid:"1.2.840.113549.1.9.1",short:"E",full:"emailAddress"},{oid:"2.5.4.3",short:"CN",full:"commonName"},{oid:"2.5.4.4",short:"SN",full:"surname"},{oid:"2.5.4.42",short:"G",full:"givenName"},{oid:"2.5.4.6",short:"C",full:"countryName"},{oid:"2.5.4.7",short:"L",full:"localityName"},{oid:"2.5.4.8",short:"S",full:"stateOrProvinceName"},{oid:"2.5.4.9",short:"STREET",full:"streetAddress"},{oid:"2.5.4.10",short:"O",full:"organizationName"},{oid:"2.5.4.11",short:"OU",full:"organizationalUnitName"},{oid:"2.5.4.12",short:"T",full:"title"}];function i(t){for(var n=new e,i=Object.keys(t),o=function(){var e=i[a],o=r.find(function(t){return t.oid==e||t.full==e});o?n[o.short]=t[e]:n[e]=t[e]},a=0;a<i.length;a++)o();return n}function o(t){return t.replace(/="/g,"=").replace(/",/g,",")}function a(t,e){var n,r,i=/(\.0+)+$/,o=t.replace(i,"").split("."),a=e.replace(i,"").split("."),_=Math.min(o.length,a.length);for(n=0;n<_;n++)if(r=parseInt(o[n],10)-parseInt(a[n],10))return r;return o.length-a.length}const _=function(){var t,r;function o(e){try{if(!e){var r=t.getLastError();e=t.getErrorMessage(r)}return"CKR_OK"!=e&&(n[e]||e)}catch(t){return t.message}}function a(t,n){var r=new e;for(var i in t.Data.Subject){var o=t.Data.Subject[i].rdn,a=t.Data.Subject[i].value;r[o]=a}return r.toString=function(){var t=this.CN||this["2.5.4.3"],e=this["СНИЛС"]||this.SNILS||this["1.2.643.100.3"],r=this["ИНН"]||this.INN||this["1.2.643.3.131.1.1"];return t+(r?"; ИНН "+r:"")+(e?"; СНИЛС "+e:"")+(n?" ("+n+")":"")},r.toString()}function _(t){return("0"+t.toString(16)).slice(-2)}function c(t){var e=new RegExp(".{1,64}","g");return t.match(e).join("\n")}this.init=function(){return new Promise(function(t,e){"undefined"!=typeof JCWebClient?t():function(t,e,n){var r=document.getElementsByTagName("body")[0],i=document.createElement("script");function o(t){r.removeChild(i),n(t)}i.type="text/javascript",i.src="https://localhost:24738/JCWebClient.js",i.readyState?i.onreadystatechange=function(){"loaded"===i.readyState||"complete"===i.readyState?(i.onreadystatechange=null,"undefined"==typeof JCWebClient?o("JCWebClient is invalid"):e()):"loading"!==i.readyState&&o("JCWebClient hasn't been loaded")}:(i.onload=e,i.onerror=function(){o("JCWebClient hasn't been loaded")}),r.appendChild(i)}(0,t,e)}).then(function(){return new Promise(function(e){try{if("undefined"==typeof JCWebClient)throw new Error("Не установлен клиент ни старой, ни новой версии JC-WebClient");if(void 0!==JCWebClient.id)throw new Error("JaCarta WebClient 2.x не поддерживается");if((t=JCWebClient()).initialize(),!t.checkWebBrowserVersion())throw new Error("Браузер не поддерживается");var n=t.getAllTokens();if(!n||1!=n.length)throw n&&n.length>1?new Error("Подключено "+n.length+" токена(ов)"):new Error("Нет подключенных токенов");r=n.shift();var i=t.getPluginVersion(),a=t.getTokenInfo(r);e({version:i,serial:a[0],flags:a[1],label:a[2],type:a[3]})}catch(t){var _=o();throw new Error(t.message||_)}})})},this.bind=function(e){return new Promise(function(n){try{if(1===t.getLoggedInState().shift())n();else if(e)t.bindTokenAsync(r,e,function(t){if(t&&"Error"==t[0]){var e=o(t[1]);throw new Error(e)}n()});else{if(!t.bindTokenUI(r))throw new Error("Пользователь отменил ввод PIN-кода");n()}}catch(t){var i=o();throw new Error(i||t.message)}})},this.unbind=function(){return new Promise(function(e){try{1===t.getLoggedInState().shift()&&t.unbindToken(),e()}catch(t){var n=o();throw new Error(n||t.message)}})},this.clean=function(){return new Promise(function(e){try{var n=t.getCertificateList(r);for(var i in n){var a=n[i].shift();t.deleteContainerOrCertificate(a)}e(i)}catch(t){var _=o();throw new Error(_||t.message)}})},this.generateCSR=function(e,n,r,i){return r&&r.length||(r=["1.3.6.1.5.5.7.3.2","1.3.6.1.5.5.7.3.4"]),i||(i="XA"),new Promise(function(a){try{t.createContainerAsync(i,n,function(n){if(n&&"Error"==n[0]){var i=o(n[1]);throw new Error(i)}var _=n,s=[];for(var u in e)e.hasOwnProperty(u)&&s.push(u,e[u]);var E=["certificatePolicies","1.2.643.100.113.1","keyUsage","digitalSignature,keyEncipherment,nonRepudiation,dataEncipherment","extendedKeyUsage",r.toString(),"1.2.643.100.111",'ASN1:FORMAT:UTF8,UTF8:"Криптотокен" (АЛАДДИН Р.Д.)'];t.genCSRAsync(_,s,E,function(t){if(t&&"Error"==t[0]){var e=o(t[1]);throw new Error(e)}var n=btoa(String.fromCharCode.apply(null,new Uint8Array(t)));a({csr:c(n),containerId:_})})})}catch(t){var _=o();throw new Error(_||t.message)}})},this.writeCertificate=function(e,n){return new Promise(function(r){try{for(var i=[],a=atob(e),_=0;_<a.length;_++)i[_]=a.charCodeAt(_);t.writeCertificateAsync(n,i,function(){r()})}catch(t){var c=o();throw new Error(c||t.message)}})},this.certificateInfo=function(n){return new Promise(function(a){try{var c=t.parseX509CertificateEx(r,n),s=new e;for(var u in c.Data.Subject){var E=c.Data.Subject[u].rdn,l=c.Data.Subject[u].value;s[E]=l}s=i(s);var f=new e;for(var u in c.Data.Issuer)E=c.Data.Issuer[u].rdn,l=c.Data.Issuer[u].value,f[E]=l;var C=new Date;a({Name:s.CN,Issuer:f,IssuerName:f.CN,Subject:s,SubjectName:s.toString(),Version:c.Data.Version,SerialNumber:c.Data["Serial Number"].map(_).join(""),Thumbprint:c.Signature.map(_).join(""),ValidFromDate:c.Data.Validity["Not Before"],ValidToDate:c.Data.Validity["Not After"],HasPrivateKey:!0,IsValid:C>=c.Data.Validity["Not Before"]&&C<=c.Data.Validity["Not After"],toString:function(){return"Название:              "+this.Name+"\nИздатель:              "+this.IssuerName+"\nСубъект:               "+this.SubjectName+"\nВерсия:                "+this.Version+"\nСерийный №:            "+this.SerialNumber+"\nОтпечаток SHA1:        "+this.Thumbprint+"\nНе действителен до:    "+this.ValidFromDate+"\nНе действителен после: "+this.ValidToDate+"\nПриватный ключ:        "+(this.HasPrivateKey?"Есть":"Нет")+"\nВалидный:              "+(this.IsValid?"Да":"Нет")}})}catch(t){var h=o();throw new Error(h||t.message)}})},this.listCertificates=function(){return new Promise(function(e){try{t.getCertificateListAsync(r,function(n){if(n&&"Error"==n[0]){var i=o(n[1]);throw new Error(i)}for(var _=[],c=0;c<n.length;c++){var s=n[c][0],u=n[c][1];try{var E=a(t.parseX509CertificateEx(r,contId),u);_.push({id:s,name:E})}catch(t){console.log("Certificate (%s) info error: %s",contId,t.message)}}e(_)})}catch(t){var n=o();throw new Error(n||t.message)}})},this.readCertificate=function(e){return new Promise(function(n){try{if(0===t.getLoggedInState().shift())var i=t.readCertificateEx(r,e);else i=t.readCertificate(e);if(!i||!i.length)throw new Error("Нет сертификата в контейнере");n(c(btoa(String.fromCharCode.apply(null,new Uint8Array(i)))))}catch(t){var a=o();throw new Error(a||t.message)}})},this.signData=function(e,n){return new Promise(function(r){try{t.signBase64EncodedDataAsync(n,e,!1,!1,function(t){if(t&&"Error"==t[0]){var e=o(t[1]);throw new Error(e)}var n=c(t);r(n)})}catch(t){var i=o();throw new Error(i||t.message)}})},this.encryptData=function(){return new Promise(function(){throw new Error("Encrypt feature is not supported, please upgrade to JaCarta-2 GOST")})},this.decryptData=function(){return new Promise(function(){throw new Error("Decrypt feature is not supported, please upgrade to JaCarta-2 GOST")})}};__webpack_require__(489),__webpack_require__(2975),__webpack_require__(3863),__webpack_require__(1430);var c=__webpack_require__(9668),s=__webpack_require__.n(c);const u={UNKNOWN_ERROR:"неизвестная ошибка",CKR_CANCEL:"пользователь отказался от выполнения операции",CKR_HOST_MEMORY:"недостаточно памяти для выполнения функции",CKR_SLOT_ID_INVALID:"неправильный идентификатор слота",CKR_GENERAL_ERROR:"такой код ошибки может означать: критическую ошибку, связанную с аппаратным обеспечением; неудачную попытку проверки пути сертификации.",CKR_FUNCTION_NOT_SUPPORTED:"функция не поддерживается",CKR_FUNCTION_FAILED:"при выполнении функции возник сбой",CKR_ARGUMENTS_BAD:"недопустимый аргумент",CKR_ATTRIBUTE_READ_ONLY:"предпринята попытка присвоения значения атрибуту, который нельзя изменять",CKR_ATTRIBUTE_TYPE_INVALID:"некорректный тип атрибута",CKR_ATTRIBUTE_VALUE_INVALID:"атрибут нулевой длины",CKR_DEVICE_ERROR:"ошибка при обращении к устройству или слоту",CKR_DEVICE_MEMORY:"для выполнения функции недостаточно памяти в устройстве",CKR_FUNCTION_CANCELED:"время ожидания выполнения функции истекло",CKR_KEY_HANDLE_INVALID:"функции передан некорректный дескриптор ключа",CKR_KEY_SIZE_RANGE:"недопустимый размер ключа",CKR_KEY_TYPE_INCONSISTENT:"данный тип ключа не может использоваться с данным механизмом",CKR_MECHANISM_INVALID:"при выполнении криптографической функции был указан неправильный механизм",CKR_MECHANISM_PARAM_INVALID:"при выполнении криптографической функции были заданы некорректные параметры механизма",CKR_OBJECT_HANDLE_INVALID:"функции передан некорректный дескриптор объекта",CKR_OPERATION_ACTIVE:"одна или несколько выполняющихся операций препятствуют выполнению новой операции",CKR_OPERATION_NOT_INITIALIZED:"выполнение операции без предварительного указания параметров невозможно",CKR_PIN_INCORRECT:"функции передан неверный PIN-код",CKR_PIN_LEN_RANGE:"недопустимая длина PIN-кода",CKR_PIN_LOCKED:"PIN-код заблокирован",CKR_SESSION_HANDLE_INVALID:"функции передан некорректный дескриптор сессии",CKR_SESSION_PARALLEL_NOT_SUPPORTED:"невозможно открыть параллельную сессию",CKR_SESSION_EXISTS:"уже открыта сессия работы с тем же устройством",CKR_SESSION_READ_ONLY_EXISTS:"сессия открыта только для чтения. Смена режима невозможна",CKR_SESSION_READ_WRITE_SO_EXISTS:"открыта сессия чтения/записи. Открыть сеанс только для чтения невозможно",CKR_SIGNATURE_INVALID:"неправильное значение электронной подписи",CKR_TEMPLATE_INCOMPLETE:"для создания объекта недостаточно атрибутов",CKR_TOKEN_NOT_PRESENT:"в момент выполнения функции устройство было отключено",CKR_TOKEN_WRITE_PROTECTED:"устройство недоступно для записи",CKR_USER_ALREADY_LOGGED_IN:"пользователь уже предъявил PIN-код",CKR_USER_NOT_LOGGED_IN:"функция не может быть выполнена в гостевом режиме работы устройства",CKR_USER_PIN_NOT_INITIALIZED:"начальное значение PIN-кода не установлено",CKR_USER_TYPE_INVALID:"функция не может быть выполнена в текущем режиме работы устройства",CKR_USER_ANOTHER_ALREADY_LOGGED_IN:"невозможно переключение из режима администратора в режим пользователя или обратно",CKR_BUFFER_TOO_SMALL:"размер заданного буфера является недостаточным для сохранения результатов функции",CKR_INFORMATION_SENSITIVE:"запрашиваемый объект недоступен для чтения",CKR_CRYPTOKI_NOT_INITIALIZED:"выполнение функции без инициализации Единой библиотеки PKCS#11 (библиотеки Cryptoki) невозможно",CKR_CRYPTOKI_ALREADY_INITIALIZED:"попытка повторно инициализировать библиотеку Cryptoki",CKR_FUNCTION_REJECTED:"пользователь отменил операцию",NOT_STATE_TOKEN_BINDED:"значение параметра state отличается от STATE_TOKEN_BINDED (1)",NOT_STATE_NOT_BINDED:"значение параметра state отличается от STATE_TOKEN_BINDED (0)",IS_STATE_NOT_BINDED:"параметр state принимает значение STATE_TOKEN_BINDED (0)",NOT_STATE_UNILATERAL_AUTHENTICATION_IN_PROGRESS:"значение параметра state отличается от STATE_TOKEN_BINDED (4)",NOT_STATE_SECURE_CHANNEL_CONNECTION_IN_PROGRESS:"значение параметра state отличается от STATE_TOKEN_BINDED (2)",NOT_STATE_SECURE_CHANNEL_ESTABLISHED:"значение параметра state отличается от STATE_TOKEN_BINDED (3)",CERTIFICATE_NOT_FOUND:"сертификат не обнаружен",PUBLIC_KEY_NOT_FOUND:"открытый ключ не обнаружен в памяти поддерживаемого устройства",SERVER_PUBLIC_KEY_NOT_FOUND:"не найден открытый ключ сервера",INVALID_SERVER_PUBLIC_KEY:"неверный открытый ключ сервера",DATA_TO_SIGN_ZERO_LENGTH:"на подпись были представлены данные, имеющие нулевую длину",DATA_TO_VERIFY_ZERO_LENGTH:"на проверку подписи были представлены данные, имеющие нулевую длину",SIGNATURE_TO_VERIFY_ZERO_LENGTH:"на проверку была представлена подпись, имеющая нулевую длину",INVALID_EC_PARAMS:"неверно заданы параметры криптографических преобразований по ГОСТ Р 34.10-2001",TOKEN_MEMORY_TOO_SMALL:"для выполнения операции в поддерживаемом устройстве недостаточно свободной памяти",KEY_SIZE_NOT_64:"длина ключа не равна 64 битам",CERT_NOT_MATCH_PUBLIC_KEY:"сертификат не соответствует открытому ключу",FAILED_CHECK_BROWSER_VERS:"ошибка проверки версии используемого браузера",BROWSER_VERS_NOT_SUPPORTED:"используемая версия браузера не поддерживается",INVALID_USER_TYPE:"неверно указан тип PIN-кода",PINS_NOT_MATCH:"введённые значения нового PIN-кода неодинаковы",USER_CHANGE_ADMIN_PIN_NOT_STATE_NOT_BINDED:"cмена PIN-кода администратора невозможна, поскольку значение параметра state отличается от STATE_TOKEN_BINDED (0)",SSL_ERR_GEN_SESSION_KEY:"ошибка при генерации ключа защиты данных, передаваемых между клиентом и сервером",SSL_ERR_GOST_ENGINE:"ошибка средства защиты, программно выполняющего криптографические преобразования на стороне клиента",SSL_ERR_SSL_NEW:"ошибка в начале выполнения протокола Handshake",SSL_ERR_CONNECT:"ошибка при выполнении протокола Handshake",SSL_ERR_SSL_WRITE:"ошибка при подготовке данных к защищённой передаче",SSL_ERR_SSL_READ:"ошибка при чтении защищённых для передачи данных",SSL_ERR_LOAD_CERT_AND_KEY_FROM_TOKEN:"ошибка при попытке считать сертификат и открытый ключ из памяти поддерживаемого устройства",SSL_ERR_GET_PEER_PUBLIC_KEY:"ошибка при получении открытого ключа сервера",CERT_PARS_ERR_GET_PUBLIC_KEY:"не удалось считать открытый ключ из сертификата",CERT_PARS_ERR_GET_ISSUER_AND_SER_NUMBER:"не удалось считать имя удостоверяющего центра и серийный номер из сертификата",CKR_KT2_PIN_ALREADY_SET:"PIN-код уже установлен",CKR_PUK_INCORRECT:"неправильный PUK-код",CKR_CANNOT_UNLOCK:"невозможно разблокировать PIN-код",CKR_PUK_INVALID:"недопустимые символы в значении PUK-кода",CKR_SM_REQUIRED:"для выполнения команды необходимо установить защищённое соединение",CKR_PKCS7_PUBLIC_KEY_NOT_FOUND:"при проверке подписи под PKCS #7 на JaCarta-2 ГОСТ не был найден открытый ключ",CKR_ICL_LIBRARY_NOT_FOUND:"ИКБ не найдена",CKR_ICL_JCVERIFY_NOT_FOUND:"утилита jcverify не найдена",CKR_ICL_JCVERIFY_CHECKSUM_NOT_FOUND:"файл контрольных сумм jcverify не найден",CKR_ICL_CHECKSUM_NOT_FOUND:"файл контрольных сумм ИКБ не найден",CKR_ICL_JCVERIFY_CHECKSUM:"неверные контрольная сумма утилиты jcverify",CKR_ICL_CHECKSUM:"неверная контрольная сумма ИКБ",CKR_ICL_NOT_ICL:"при загрузке ИКБ произошла ошибка. Требуемые функции найдены"},E=function(){var t,n,r=!1;function a(e,n){return new Promise(function(e){var n=0;setTimeout(function r(){if(n>6e4)throw new Error("Не удалось дождаться завершения асинхронной операции");t.isAsyncOperationInProgress()?(setTimeout(r,100),n+=100):e()},0)}).then(function(){return new Promise(function(i,o){r=!0,t.exec({async:!0,cmd:e,args:n,onSuccess:_(i),onError:c(o)})})})}function _(t){return function(e){r=!1,t(e)}}function c(e){return function(n){r=!1,t&&"JCWebClientError"===n.name&&u[n.message]&&(n.message=u[n.message]),e(n)}}function E(t){var n=new e;for(var r in t){var o=t[r].rdn,a=t[r].value;o&&a&&(n[o]=a)}return i(n)}function l(t,e){return t.CN+(t.INNLE?"; ИНН ЮЛ "+t.INNLE:"")+(t.INN?"; ИНН "+t.INN:"")+(t.SNILS?"; СНИЛС "+t.SNILS:"")+(e?" ("+e+")":"")}function f(t){return("0"+t.toString(16)).slice(-2)}function C(t){var e=new RegExp(".{1,64}","g");return t.match(e).join("\n")}this.init=function(){var e={};return new Promise(function(t,e){"undefined"!=typeof JCWebClient2?t():function(t,e,n){var r=document.getElementsByTagName("body")[0],i=document.createElement("script");function o(t){r.removeChild(i),n(t)}i.type="text/javascript",i.src="https://localhost:24738/JCWebClient.js",i.readyState?i.onreadystatechange=function(){"loaded"===i.readyState||"complete"===i.readyState?(i.onreadystatechange=null,"undefined"==typeof JCWebClient2?o("JCWebClient is invalid"):e()):"loading"!==i.readyState&&o("JCWebClient hasn't been loaded")}:(i.onload=e,i.onerror=function(){o("JCWebClient hasn't been loaded")}),r.appendChild(i)}(0,t,e)}).then(function(){return(t=JCWebClient2).initialize(),t.isAsyncOperationInProgress||(t.isAsyncOperationInProgress=function(){return r}),a(t.Cmds.getJCWebClientVersion)}).then(function(n){return e.version=n,a(t.Cmds.getAllSlots)}).then(function(t){return new Promise(function(e){var n=t.filter(function(t){return t.tokenExists});if(!n||1!==n.length)throw n&&n.length>1?new Error("Подключено "+n.length+" токена(ов)"):new Error("Нет подключенных токенов");e(n.shift().id)})}).then(function(e){return n=e,a(t.Cmds.getTokenInfo,{tokenID:e})}).then(function(n){if(-1===[t.Vars.TokenType.gost,t.Vars.TokenType.gost2].indexOf(n.type))throw new Error("Подключен токен недопустимого типа: "+n.type);return Object.assign(e,n)})},this.bind=function(e){return a(t.Cmds.getLoggedInState).then(function(r){if(r.state===t.Vars.AuthState.binded&&r.tokenID===n)return!0;var i={tokenID:n};return e?i.pin=e:i.useUI=!0,a(t.Cmds.bindToken,i)})},this.unbind=function(){return a(t.Cmds.getLoggedInState).then(function(e){return e.state===t.Vars.AuthState.notBinded||a(t.Cmds.unbindToken)})},this.clean=function(){return a(t.Cmds.getContainerList,{tokenID:n}).then(function(e){var n=Promise.resolve(),r=function(r){n=n.then(function(){return a(t.Cmds.deletePKIObject,{id:e[r].id})})};for(var i in e)r(i);return n})},this.generateCSR=function(e,n,r){n&&n.length||(n=["1.3.6.1.5.5.7.3.2","1.3.6.1.5.5.7.3.4"]),r||(r={});var i,o=r.description||e.CN,_=r.algorithm||t.Vars.KeyAlgorithm.GOST_2012_256,c={certificatePolicies:"1.2.643.100.113.1",keyUsage:"digitalSignature,keyEncipherment,nonRepudiation,dataEncipherment",extendedKeyUsage:n.toString(),"1.2.643.100.111":'ASN1:FORMAT:UTF8,UTF8:"Криптотокен" (АЛАДДИН Р.Д.)'};return a(t.Cmds.createKeyPair,{paramSet:"XA",description:o,algorithm:_}).then(function(n){return i=n,a(t.Cmds.genCSR,{id:i,dn:e,exts:c})}).then(function(t){return{csr:C(btoa(String.fromCharCode.apply(null,new Uint8Array(t)))),keyPairId:i}})},this.writeCertificate=function(e,n){return a(t.Cmds.writeUserCertificate,{keyPairID:n,cert:e})},this.certificateInfo=function(e,r){return r||(r={}),a(t.Cmds.parseX509Certificate,{tokenID:n,id:e}).then(function(t){var e=E(t.Data.Subject),n=E(t.Data.Issuer),r=new Date;return{Name:e.CN,Issuer:n,IssuerName:o(n.toString()),Subject:e,SubjectName:o(e.toString()),Version:t.Data.Version,SerialNumber:t.Data["Serial Number"].map(f).join(""),Thumbprint:void 0,ValidFromDate:t.Data.Validity["Not Before"],ValidToDate:t.Data.Validity["Not After"],HasPrivateKey:!0,IsValid:r>=t.Data.Validity["Not Before"]&&r<=t.Data.Validity["Not After"],Algorithm:t.Data["Subject Public Key Info"]["Public Key Algorithm"],toString:function(){return"Название:              "+this.Name+"\nИздатель:              "+this.IssuerName+"\nСубъект:               "+this.SubjectName+"\nВерсия:                "+this.Version+"\nАлгоритм:              "+this.Algorithm+"\nСерийный №:            "+this.SerialNumber+"\nОтпечаток SHA1:        "+this.Thumbprint+"\nНе действителен до:    "+this.ValidFromDate+"\nНе действителен после: "+this.ValidToDate+"\nПриватный ключ:        "+(this.HasPrivateKey?"Есть":"Нет")+"\nВалидный:              "+(this.IsValid?"Да":"Нет")}}}).then(function(r){return a(t.Cmds.getCertificateBody,{id:e,tokenID:n}).then(function(t){return r.Thumbprint=s()(t),r})})},this.listCertificates=function(){return a(t.Cmds.getContainerList,{tokenID:n}).then(function(e){for(var r=[],i=Promise.resolve(),o=0;o<e.length;o++)(function(e,o){i=i.then(function(){return a(t.Cmds.parseX509Certificate,{tokenID:n,id:e}).then(function(t){var n=t.Data&&E(t.Data.Subject);return t.Data&&r.push({id:e,name:l(n,o),subject:n,validFrom:t.Data.Validity["Not Before"],validTo:t.Data.Validity["Not After"]}),r.length})})})(e[o].id,e[o].description);return i.then(function(){return r})})},this.readCertificate=function(e){return a(t.Cmds.getCertificateBody,{id:e,tokenID:n}).then(function(t){if(t&&t.length)return C(btoa(String.fromCharCode.apply(null,new Uint8Array(t))));throw new Error("Нет сертификата в контейнере")})},this.signData=function(e,n,r){r||(r={});var i=r.attached;return a(t.Cmds.signBase64EncodedData,{contID:n,data:e,attachedSignature:!!i}).then(function(t){return C(t)})},this.verifySign=function(e,r,i){i||(i={});var o=i.attached,_={signature:Array.from(atob(r),function(t){return t.charCodeAt(0)}),options:{tokenID:n,useToken:!0}};return o||(_.data=Array.from(atob(e),function(t){return t.charCodeAt(0)})),a(t.Cmds.verifyData,_)},this.encryptData=function(e,n){var r=Array.from(atob(e),function(t){return t.charCodeAt(0)});return this.readCertificate(n).then(function(e){return a(t.Cmds.encryptData,{contID:n,receiverCertificate:e,receiverCertificates:[e],data:r})}).then(function(t){return C(btoa(String.fromCharCode.apply(null,new Uint8Array(t))))})},this.decryptData=function(e,n){var r=Array.from(atob(e),function(t){return t.charCodeAt(0)});return this.readCertificate(n).then(function(e){var i=Array.from(atob(e),function(t){return t.charCodeAt(0)});return a(t.Cmds.decryptData,{contID:n,senderCertificate:i,data:r})}).then(function(t){return btoa(String.fromCharCode.apply(null,new Uint8Array(t)))})}};__webpack_require__(2820),__webpack_require__(9650);var l=2097152,f={"0x800B010A":"Не удается построить цепочку сертификатов до доверенного корневого центра, убедитесь что установлены все корневые и промежуточные сертификаты [0x800B010A]","0x80090020":"Внутренняя ошибка [0x80090020]. Если используется внешний токен, убедитесь, что ввели корректный PIN-код","0x8007065B":"Истекла лицензия на КриптоПро CSP [0x8007065B]","0x800B0109":"Отсутствует сертификат УЦ в хранилище корневых сертификатов [0x800B0109]","0x8009200C":"Не удается найти сертификат и закрытый ключ для расшифровки [0x8009200C]","0x80090008":"Указан неверный алгоритм (используется устаревшая версия КриптоПро CSP или КриптоПро ЭЦП Browser plug-in) [0x80090008]","0x000004C7":"Операция отменена пользователем [0x000004C7]","0x8009000D":"Нет доступа к закрытому ключу. Ввод пароля отменен или произошел сбой в запомненных паролях [0x8009000D]","0x800B0101":"Истек/не наступил срок действия требуемого сертификата [0x800B0101]","0x80070026":"Недопустимый формат данных записываемого сертификата [0x80070026]","0x8009200B":"Не удается найти закрытый ключ для подписи, убедитесь что сертификат установлен правильно [0x8009200B]","0x8010006E":"Действие отменено пользователем [0x8010006E]",NPObject:"Не удается подписать, убедитесь что выбранный сертификат подходит для подписи","Automation server":"Библиотека CAPICOM не была автоматически зарегистрирована или заблокирована на Вашем компьютере (2146827859)","сервером программирования":"Библиотека CAPICOM не была автоматически зарегистрирована или заблокирована на Вашем компьютере (2146827859)"};function C(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const d=function(){var t,n="",r=!1,o=0;function _(){return a(n,"2.0.13292")>=0}function c(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t)return e.Certificates.then(function(t){return n=t,t.Count}).then(function(t){for(var e=[],r=1;r<=t;r++)e.push(n.Item(r));return Promise.all(e)}).then(function(t){var e=[];for(var n in t)e.push(t[n].SubjectName,t[n].Thumbprint,t[n].ValidFromDate,t[n].ValidToDate);return Promise.all(e)}).then(function(t){for(var e=[],n=0;n<t.length;n+=4){var i=t[n+1];if(r.indexOf(i)+1)break;var o=h(t[n]);e.push({id:i,name:A(o),subject:o,validFrom:new Date(t[n+2]),validTo:new Date(t[n+3])})}return e});for(var i=e.Certificates,o=[],a=1;a<=i.Count;a++){var _=i.Item(a),c=_.Thumbprint;if(r.indexOf(c)+1)break;var s=h(_.SubjectName);o.push({id:c,name:A(s),subject:s,validFrom:new Date(_.ValidFromDate),validTo:new Date(_.ValidToDate)})}return o}function s(e,n){if(t)return e.Certificates.then(function(t){return t.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SHA1_HASH,n)}).then(function(t){return t.Count.then(function(e){return 1===e?t.Item(1):null})});var r=e.Certificates.Find(cadesplugin.CAPICOM_CERTIFICATE_FIND_SHA1_HASH,n);return 1===r.Count?r.Item(1):null}function u(e,n){var i,o;if(t)return cadesplugin.then(function(){return cadesplugin.CreateObjectAsync("CAPICOM.Store")}).then(function(t){return(i=t).Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED)}).then(function(){return s(i,e)}).then(function(t){return i.Close().then(function(){return!t&&_()?i.Open(cadesplugin.CADESCOM_CONTAINER_STORE).then(function(){return s(i,e)}).then(function(t){return i.Close().then(function(){return t})}):t})}).then(function(t){if(!t)throw new Error("Не обнаружен сертификат c отпечатком "+e);return o=t}).then(function(){return o.HasPrivateKey()}).then(function(t){var e=Promise.resolve();return t&&n&&(e=e.then(function(){return o.PrivateKey}).then(function(t){return Promise.all([t.propset_KeyPin(n||""),t.propset_CachePin(r)])})),e}).then(function(){return o});var a,c=cadesplugin.CreateObject("CAPICOM.Store");if(c.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED),a=s(c,e),c.Close(),!a&&_()&&(c.Open(cadesplugin.CADESCOM_CONTAINER_STORE),a=s(c,e),c.Close()),!a)throw new Error("Не обнаружен сертификат c отпечатком "+e);return a.HasPrivateKey&&n&&(a.PrivateKey.KeyPin=n||"",void 0!==a.PrivateKey.CachePin&&(a.PrivateKey.CachePin=r)),a}function E(t){if(console.log("Crypto-Pro error",t.message||t),t.message)for(var e in f)if(f.hasOwnProperty(e)&&t.message.indexOf(e)+1){t.message=f[e];break}return t.message||t}function h(t){var n=new e,r=t.match(/([а-яёА-ЯЁa-zA-Z0-9\.\s]+)=(?:("[^"]+?")|(.+?))(?:,|$)/g);return(r=r?r.map(function(t){return t.replace(/,$/,"")}):[]).forEach(function(t){var e=t.match(/([^=]+)=(.*)/);if(e&&3===e.length){var r=e[1].trim().replace(/^OID\./,"");n[r]=e[2].trim().replace(/^"(.*)"$/,"$1").replace(/""/g,'"')}}),i(n)}function d(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+'="'+t[n].replace(/"/g,'""')+'", ');return e}function A(t){return t.CN+(t.INNLE?"; ИНН ЮЛ "+t.INNLE:"")+(t.INN?"; ИНН "+t.INN:"")+(t.SNILS?"; СНИЛС "+t.SNILS:"")}function p(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}this.init=function(){return window.cadesplugin_skip_extension_install=!0,window.allow_firefox_cadesplugin_async=!0,__webpack_require__(8249),t=!!cadesplugin.CreateObjectAsync,o=cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY,new Promise(function(t){if(!window.cadesplugin)throw new Error("КриптоПро ЭЦП Browser plug-in не обнаружен");t()}).then(function(){return t?cadesplugin.then(function(){return cadesplugin.CreateObjectAsync("CAdESCOM.About")}).then(function(t){return t.Version}).then(function(t){return{version:t,manifestV3:a(n=t,"2.0.15400")>=0}}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{var e=cadesplugin.CreateObject("CAdESCOM.About");if(!e||!e.Version)throw new Error("КриптоПро ЭЦП Browser plug-in не загружен");t({version:n=e.Version,manifestV3:!1})}catch(t){var r=E(t);throw new Error(r)}})})},this.bind=function(t){return r=!0,Promise.resolve(r)},this.unbind=function(){return r=!1,Promise.resolve(r)},this.generateCSR=function(e,n,r){n&&n.length||(n=["1.3.6.1.5.5.7.3.2","1.3.6.1.5.5.7.3.4"]),r||(r={});var i,o,a,_,c,s,u,f,C,h,A,T,I,S=r.pin,O=r.providerType||80;return t?cadesplugin.then(function(){return Promise.all([cadesplugin.CreateObjectAsync("X509Enrollment.CX509Enrollment"),cadesplugin.CreateObjectAsync("X509Enrollment.CX509CertificateRequestPkcs10"),cadesplugin.CreateObjectAsync("X509Enrollment.CX509PrivateKey"),cadesplugin.CreateObjectAsync("X509Enrollment.CX509ExtensionKeyUsage"),cadesplugin.CreateObjectAsync("X509Enrollment.CX509ExtensionEnhancedKeyUsage"),cadesplugin.CreateObjectAsync("X509Enrollment.CObjectIds"),cadesplugin.CreateObjectAsync("X509Enrollment.CX500DistinguishedName"),cadesplugin.CreateObjectAsync("X509Enrollment.CX509Extensions"),cadesplugin.CreateObjectAsync("X509Enrollment.CCspInformations"),cadesplugin.CreateObjectAsync("X509Enrollment.CX509Extension")])}).then(function(t){return i=t[0],o=t[1],a=t[2],c=t[3],s=t[4],u=t[5],h=t[6],_=t[7],A=t[8],I=t[9],A.AddAvailableCsps()}).then(function(){return A.Count}).then(function(t){if(!t)throw new Error("No CSP informations!");for(var e=[],n=0;n<t;n++)e.push(A.ItemByIndex(n));return Promise.all(e)}).then(function(t){var e=[];for(var n in t){var r=t[n];e.push(r.LegacyCsp),e.push(r.Type),e.push(r.Name)}return Promise.all(e)}).then(function(t){for(var e,n,r=0;r<t.length;r+=3){var i=t[r],o=t[r+1],_=t[r+2];if(i&&o==O){e=o,n=T=_;break}}if(!n||!e)throw new Error("No suitable CSP!");var c=[a.propset_KeySpec(2),a.propset_Existing(!1),a.propset_ExportPolicy(1),a.propset_ProviderType(e),a.propset_ProviderName(n)];return S&&c.push(a.propset_Pin(S)),Promise.all(c)}).then(function(){return o.InitializeFromPrivateKey(1,a,"")}).then(function(){return c.InitializeEncode(240)}).then(function(){for(var t=[],e=0;e<n.length;e++)t.push(cadesplugin.CreateObjectAsync("X509Enrollment.CObjectId"));return Promise.all(t)}).then(function(t){f=t;for(var e=[],r=0;r<n.length;r++)e.push(f[r].InitializeFromValue(n[r]));return Promise.all(e)}).then(function(){for(var t=[],e=0;e<n.length;e++)t.push(u.Add(f[e]));return Promise.all(t)}).then(function(){return cadesplugin.CreateObjectAsync("X509Enrollment.CObjectId")}).then(function(t){return(C=t).InitializeFromValue("1.2.643.100.111")}).then(function(){var t=p(T.slice(0,127));t.unshift(12,t.length);var e=btoa(String.fromCharCode.apply(null,new Uint8Array(t)));return I.Initialize(C,1,e)}).then(function(){return s.InitializeEncode(u)}).then(function(){return o.X509Extensions}).then(function(t){return _=t,Promise.all([_.Add(c),_.Add(s),_.Add(I)])}).then(function(){var t=d(e);return h.Encode(t,l)}).then(function(){return o.propset_Subject(h)}).then(function(){return i.InitializeFromRequest(o)}).then(function(){return i.CreateRequest(1)}).then(function(t){return{csr:t}}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{var r,i,o=cadesplugin.CreateObject("X509Enrollment.CCspInformations"),a=cadesplugin.CreateObject("X509Enrollment.CX509Enrollment"),_=cadesplugin.CreateObject("X509Enrollment.CX509CertificateRequestPkcs10"),c=cadesplugin.CreateObject("X509Enrollment.CX509PrivateKey"),s=cadesplugin.CreateObject("X509Enrollment.CX509ExtensionKeyUsage"),u=cadesplugin.CreateObject("X509Enrollment.CX509ExtensionEnhancedKeyUsage"),f=cadesplugin.CreateObject("X509Enrollment.CObjectIds"),C=cadesplugin.CreateObject("X509Enrollment.CX500DistinguishedName");o.AddAvailableCsps();for(var h=0;h<o.Count;h++){var A=o.ItemByIndex(h);if(A.LegacyCsp&&A.Type==O){r=A.Type,i=A.Name;break}}if(!i||!r)throw new Error("No suitable CSP!");c.KeySpec=2,c.Existing=!1,c.ExportPolicy=1,c.ProviderName=i,c.ProviderType=r,_.InitializeFromPrivateKey(1,c,""),s.InitializeEncode(240);for(var T=[],I=0;I<n.length;I++)T.push(cadesplugin.CreateObject("X509Enrollment.CObjectId")),T[I].InitializeFromValue(n[I]),f.Add(T[I]);u.InitializeEncode(f),_.X509Extensions.Add(s),_.X509Extensions.Add(u);var S=cadesplugin.CreateObject("X509Enrollment.CObjectId");S.InitializeFromValue("1.2.643.100.111");var R=i.slice(0,127),N=p(R);N.unshift(12,R.length);var v=btoa(String.fromCharCode.apply(null,new Uint8Array(N))),g=cadesplugin.CreateObject("X509Enrollment.CX509Extension");g.Initialize(S,1,v),_.X509Extensions.Add(g);var m=d(e);C.Encode(m,l),_.Subject=C,a.InitializeFromRequest(_),t({csr:a.CreateRequest(1)})}catch(t){var D=E(t);throw new Error(D)}})},this.writeCertificate=function(e){if(t){var n,r=[];return this.listCertificates().then(function(t){for(var e in t)r.push(t[e].id);return cadesplugin.CreateObjectAsync("X509Enrollment.CX509Enrollment")}).then(function(t){return(n=t).Initialize(1)}).then(function(){return n.InstallResponse(0,e,1,"")}).then(this.listCertificates).then(function(t){for(var e in t){var n=t[e].id;if(r.indexOf(n)<0)return n}throw new Error("Не удалось найти установленный сертификат по отпечатку")}).catch(function(t){var e=E(t);throw new Error(e)})}return new Promise(function(t){try{var n=[],r=cadesplugin.CreateObject("CAPICOM.Store");r.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);for(var i=r.Certificates,o=1;o<=i.Count;o++)n.push(i.Item(o).Thumbprint);r.Close();var a=cadesplugin.CreateObject("X509Enrollment.CX509Enrollment");a.Initialize(1),a.InstallResponse(0,e,1,""),(r=cadesplugin.CreateObject("CAPICOM.Store")).Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED),i=r.Certificates;for(var _=!1,c="",s=1;s<=i.Count;s++)c=i.Item(s).Thumbprint,n.indexOf(c)<0&&(_=!0);if(r.Close(),!_)throw new Error("Не удалось найти установленный сертификат по отпечатку");t(c)}catch(t){var u=E(t);throw new Error(u)}})},this.certificateInfo=function(e,n){n||(n={checkValid:!1});var r=function(){return"Название:              "+this.Name+"\nИздатель:              "+this.IssuerName+"\nСубъект:               "+this.SubjectName+"\nВерсия:                "+this.Version+"\nАлгоритм:              "+this.Algorithm+"\nСерийный №:            "+this.SerialNumber+"\nОтпечаток SHA1:        "+this.Thumbprint+"\nНе действителен до:    "+this.ValidFromDate+"\nНе действителен после: "+this.ValidToDate+"\nПриватный ключ:        "+(this.HasPrivateKey?"Есть":"Нет")+"\nКриптопровайдер:       "+this.ProviderName+"\nВалидный:              "+(this.IsValid?"Да":"Нет")};if(t){var i={};return u(e).then(function(t){return Promise.all([t.HasPrivateKey(),n.checkValid?t.IsValid().then(function(t){return t.Result}):void 0,t.IssuerName,t.SerialNumber,t.SubjectName,t.Thumbprint,t.ValidFromDate,t.ValidToDate,t.Version,t.PublicKey().then(function(t){return t.Algorithm}).then(function(t){return t.FriendlyName}),t.HasPrivateKey().then(function(e){return!e&&["",void 0]||t.PrivateKey.then(function(t){return Promise.all([t.ProviderName,t.ProviderType])})})])}).then(function(t){if((i={HasPrivateKey:t[0],IsValid:t[1],IssuerName:t[2],Issuer:void 0,SerialNumber:t[3],SubjectName:t[4],Subject:void 0,Name:void 0,Thumbprint:t[5],ValidFromDate:new Date(t[6]),ValidToDate:new Date(t[7]),Version:t[8],Algorithm:t[9],ProviderName:t[10][0],ProviderType:t[10][1]}).Subject=h(i.SubjectName),i.Issuer=h(i.IssuerName),i.Name=i.Subject.CN,!n.checkValid){var e=new Date;i.IsValid=e>=i.ValidFromDate&&e<=i.ValidToDate}return i.toString=r,i}).catch(function(t){var e=E(t);throw new Error(e)})}return new Promise(function(t){try{var i=u(e),o=i.HasPrivateKey(),a=h(i.SubjectName),_={HasPrivateKey:o,IsValid:n.checkValid?i.IsValid().Result:void 0,IssuerName:i.IssuerName,Issuer:h(i.IssuerName),SerialNumber:i.SerialNumber,SubjectName:i.SubjectName,Subject:a,Name:a.CN,Thumbprint:i.Thumbprint,ValidFromDate:new Date(i.ValidFromDate),ValidToDate:new Date(i.ValidToDate),Version:i.Version,Algorithm:i.PublicKey().Algorithm.FriendlyName,ProviderName:o&&i.PrivateKey.ProviderName||"",ProviderType:o&&i.PrivateKey.ProviderType||void 0};if(!n.checkValid){var c=new Date;_.IsValid=c>=_.ValidFromDate&&c<=_.ValidToDate}_.toString=r,t(_)}catch(t){var s=E(t);throw new Error(s)}})},this.listCertificates=function(){var e,n,r=_();return t?cadesplugin.then(function(){return cadesplugin.CreateObjectAsync("CAPICOM.Store")}).then(function(t){return(e=t).Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED)}).then(function(){return c(e)}).then(function(t){return n=t,e.Close()}).then(function(){var t;return r?e.Open(cadesplugin.CADESCOM_CONTAINER_STORE).then(function(){var t=n.map(function(t){return t.id});return c(e,t)}).then(function(n){return t=n,e.Close()}).then(function(){return t}).catch(function(t){return console.log(t),[]}):[]}).then(function(t){var e;return(e=n).push.apply(e,C(t)),n}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{var e=cadesplugin.CreateObject("CAPICOM.Store");e.Open(cadesplugin.CAPICOM_CURRENT_USER_STORE,cadesplugin.CAPICOM_MY_STORE,cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED);var n=c(e);if(e.Close(),r)try{e.Open(cadesplugin.CADESCOM_CONTAINER_STORE);var i=c(e,n.map(function(t){return t.id}));e.Close(),n.push.apply(n,C(i))}catch(t){console.log(t)}t(n)}catch(t){var o=E(t);throw new Error(o)}})},this.readCertificate=function(e){return t?u(e).then(function(t){return t.Export(cadesplugin.CADESCOM_ENCODE_BASE64)}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{t(u(e).Export(cadesplugin.CADESCOM_ENCODE_BASE64))}catch(t){var n=E(t);throw new Error(n)}})},this.signData=function(e,n,r){"string"==typeof r&&(r={pin:r}),r||(r={});var i,a,_,c=r,s=c.pin,l=c.attached;return t?u(n,s).then(function(t){return i=t,Promise.all([cadesplugin.CreateObjectAsync("CAdESCOM.CPSigner"),cadesplugin.CreateObjectAsync("CAdESCOM.CadesSignedData")])}).then(function(t){return a=t[0],_=t[1],Promise.all([a.propset_Certificate(i),a.propset_Options(o),_.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY)])}).then(function(){return _.propset_Content(e)}).then(function(){return _.SignCades(a,cadesplugin.CADESCOM_CADES_BES,!l)}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{var r=u(n,s),i=cadesplugin.CreateObject("CAdESCOM.CPSigner");i.Certificate=r,i.Options=o;var a=cadesplugin.CreateObject("CAdESCOM.CadesSignedData");a.ContentEncoding=cadesplugin.CADESCOM_BASE64_TO_BINARY,a.Content=e,t(a.SignCades(i,cadesplugin.CADESCOM_CADES_BES,!l))}catch(t){var _=E(t);throw new Error(_)}})},this.signData2=function(e,n,r,i){var a=arguments;i||(i={});var _,c,s,l,f=i,C=f.pin,h=f.pin2,d=f.attached;return t?Promise.all([u(n,C),u(r,h)]).then(function(t){return _=t[0],c=t[1],Promise.all([cadesplugin.CreateObjectAsync("CAdESCOM.CPSigner"),cadesplugin.CreateObjectAsync("CAdESCOM.CadesSignedData")])}).then(function(t){return s=t[0],(l=t[1]).propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY)}).then(function(){return l.propset_Content(e)}).then(function(){return Promise.all([s.propset_Certificate(_),s.propset_Options(o)])}).then(function(){return l.SignCades(s,cadesplugin.CADESCOM_CADES_BES,!d)}).then(function(){return Promise.all([s.propset_Certificate(c),s.propset_Options(o)])}).then(function(){return l.CoSignCades(s,cadesplugin.CADESCOM_CADES_BES)}).catch(function(t){console.log(a);var e=E(t);throw new Error(e)}):new Promise(function(t){try{var i=u(n,C),a=u(r,h),_=cadesplugin.CreateObject("CAdESCOM.CadesSignedData");_.ContentEncoding=cadesplugin.CADESCOM_BASE64_TO_BINARY,_.Content=e;var c=cadesplugin.CreateObject("CAdESCOM.CPSigner");c.Certificate=i,c.Options=o,_.SignCades(c,cadesplugin.CADESCOM_CADES_BES,!d),c.Certificate=a,c.Options=o,t(_.CoSignCades(c,cadesplugin.CADESCOM_CADES_BES))}catch(t){var s=E(t);throw new Error(s)}})},this.addSign=function(e,n,r,i){i||(i={});var a,_,c,s=i,l=s.pin,f=s.attached;return t?u(r,l).then(function(t){return a=t,Promise.all([cadesplugin.CreateObjectAsync("CAdESCOM.CPSigner"),cadesplugin.CreateObjectAsync("CAdESCOM.CadesSignedData")])}).then(function(t){return _=t[0],c=t[1],f?Promise.resolve():c.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY).then(function(){return c.propset_Content(e)})}).then(function(){return c.VerifyCades(n,cadesplugin.CADESCOM_CADES_BES,!f).catch(function(t){console.log("Existing sign not verified: %o",t)})}).then(function(){return Promise.all([_.propset_Certificate(a),_.propset_Options(o)])}).then(function(){return c.CoSignCades(_,cadesplugin.CADESCOM_CADES_BES)}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{var i=u(r,l),a=cadesplugin.CreateObject("CAdESCOM.CadesSignedData");f||(a.ContentEncoding=cadesplugin.CADESCOM_BASE64_TO_BINARY,a.Content=e);try{a.VerifyCades(n,cadesplugin.CADESCOM_CADES_BES,!f)}catch(t){console.log("Existing sign not verified: %o",t)}var _=cadesplugin.CreateObject("CAdESCOM.CPSigner");_.Certificate=i,_.Options=o,t(a.CoSignCades(_,cadesplugin.CADESCOM_CADES_BES))}catch(t){var c=E(t);throw new Error(c)}})},this.verifySign=function(e,n,r){r||(r={});var i,o=r.attached;return t?cadesplugin.then(function(){return cadesplugin.CreateObjectAsync("CAdESCOM.CadesSignedData")}).then(function(t){return i=t,o?Promise.resolve():i.propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY).then(function(){return i.propset_Content(e)})}).then(function(){return i.VerifyCades(n,cadesplugin.CADESCOM_CADES_BES,!o)}).then(function(){return!0}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{var r=cadesplugin.CreateObject("CAdESCOM.CadesSignedData");o||(r.ContentEncoding=cadesplugin.CADESCOM_BASE64_TO_BINARY,r.Content=e),r.VerifyCades(n,cadesplugin.CADESCOM_CADES_BES,!o),t(!0)}catch(t){var i=E(t);throw new Error(i)}})},this.encryptData=function(e,n){var r,i,o;return t?u(n).then(function(t){return r=t,cadesplugin.CreateObjectAsync("CAdESCOM.CPEnvelopedData")}).then(function(t){return(i=t).propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY)}).then(function(){return i.propset_Content(e)}).then(function(){return i.Recipients}).then(function(t){return(o=t).Clear()}).then(function(){return o.Add(r)}).then(function(){return i.Encrypt()}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{var r=u(n),i=cadesplugin.CreateObject("CAdESCOM.CPEnvelopedData");i.ContentEncoding=cadesplugin.CADESCOM_BASE64_TO_BINARY,i.Content=e,i.Recipients.Clear(),i.Recipients.Add(r),t(i.Encrypt())}catch(t){var o=E(t);throw new Error(o)}})},this.decryptData=function(e,n,r){var i,o,a;return t?u(n,r).then(function(t){return i=t,cadesplugin.CreateObjectAsync("CAdESCOM.CPEnvelopedData")}).then(function(t){return(o=t).propset_ContentEncoding(cadesplugin.CADESCOM_BASE64_TO_BINARY)}).then(function(){return o.Recipients}).then(function(t){return(a=t).Clear()}).then(function(){return a.Add(i)}).then(function(){return o.Decrypt(e)}).then(function(){return o.Content}).catch(function(t){var e=E(t);throw new Error(e)}):new Promise(function(t){try{var i=u(n,r),o=cadesplugin.CreateObject("CAdESCOM.CPEnvelopedData");o.ContentEncoding=cadesplugin.CADESCOM_BASE64_TO_BINARY,o.Recipients.Clear(),o.Recipients.Add(i),o.Decrypt(e),t(o.Content)}catch(t){var a=E(t);throw new Error(a)}})}};var A=__webpack_require__(361),p=__webpack_require__.n(A);const T={ALREADY_LOGGED_IN:"Пользователь уже авторизован",ASN1_ERROR:"Ошибка разбора структуры ASN1",BAD_PARAMS:"Неправильные параметры",BASE64_DECODE_FAILED:"Ошибка декодирования из base64",CA_CERTIFICATES_NOT_FOUND:"Корневые сертификаты отсутствуют",CANNOT_SAVE_PIN_IN_CACHE:"Невозможно сохранить PIN-код",CANT_HARDWARE_VERIFY_CMS:"Проверка множественной подписи с вычислением хеша на устройстве не поддерживается",CEK_NOT_AUTHENTIC:"Контейнер в формате CMS поврежден или переданный ключ не является ключом получателя",CERTIFICATE_CATEGORY_BAD:"Некорректная категория сертификата",CERTIFICATE_EXISTS:"Сертификат с таким телом уже существует на устройстве",CERTIFICATE_HASH_NOT_UNIQUE:"Идентификатор сертификата не уникален",CERTIFICATE_NOT_FOUND:"Сертификат не найден на устройстве",CERTIFICATE_VERIFICATION_ERROR:"Ошибка проверки сертификата",DATA_INVALID:"Неверные данные",DEVICE_ERROR:"Ошибка устройства.",DEVICE_NOT_FOUND:"Устройство не найдено",FUNCTION_FAILED:"Невозможно выполнить операцию",FUNCTION_REJECTED:"Операция отклонена пользователем",KEY_FUNCTION_NOT_PERMITTED:"Операция запрещена для данного типа ключа",KEY_ID_NOT_UNIQUE:"Идентификатор ключевой пары не уникален",KEY_LABEL_NOT_UNIQUE:"Метка ключевой пары не уникальна",KEY_NOT_FOUND:"Не найдена соответствующая ключевая пара.",LICENCE_READ_ONLY:"Лицензия доступна только для чтения",NOT_ENOUGH_MEMORY:"Недостаточно памяти",PEM_ERROR:"Ошибка декодирования PEM",PIN_CHANGED:"PIN-код был изменен извне",PIN_INCORRECT:"Введен неправильный PIN-код",PIN_INVALID:"PIN-код содержит недопустимые символы",PIN_LENGTH_INVALID:"Введен слишком короткий PIN-код",PIN_LOCKED:"PIN-код заблокирован",PKCS11_LOAD_FAILED:"Не удалось загрузить модуль PKCS#11",SESSION_INVALID:"Текущая сессия устарела",TOKEN_INVALID:"Ошибка чтения/записи устройства.",UNSUPPORTED_BY_TOKEN:"Операция не поддерживается токеном",USER_NOT_LOGGED_IN:"Пользователь не авторизован",USER_PIN_NOT_INITIALIZED:"PIN-код пользователя не инициализирован",WRONG_KEY_TYPE:"Неправильный тип ключа",X509_AKID_ISSUER_SERIAL_MISMATCH:"Несовпадение серийного номера субьекта и доверенного центра",X509_AKID_SKID_MISMATCH:"Несовпадение идентификатора ключа у субьекта и доверенного центра",X509_APPLICATION_VERIFICATION:"Ошибка проверки приложения",X509_CERT_CHAIN_TOO_LONG:"Слишком длинная цепочка сертификатов",X509_CERT_HAS_EXPIRED:"Срок действия сертификата истек",X509_CERT_NOT_YET_VALID:"Срок действия сертификата еще не начался",X509_CERT_REJECTED:"Сертифкат отклонен",X509_CERT_REVOKED:"Сертификат отозван",X509_CERT_SIGNATURE_FAILURE:"Неверная подпись сертификата",X509_CERT_UNTRUSTED:"Недоверенный сертификат",X509_CRL_HAS_EXPIRED:"Срок действия CRL истек",X509_CRL_NOT_YET_VALID:"Срок действия CRL еще не начался",X509_CRL_PATH_VALIDATION_ERROR:"Неправильный путь CRL",X509_CRL_SIGNATURE_FAILURE:"Неверная подпись CRL",X509_DEPTH_ZERO_SELF_SIGNED_CERT:"Недоверенный самоподписанный сертификат",X509_DIFFERENT_CRL_SCOPE:"Другая область CRL",X509_ERROR_IN_CERT_NOT_AFTER_FIELD:'Некорректные данные в поле "notAfter" у сертификата',X509_ERROR_IN_CERT_NOT_BEFORE_FIELD:'Некорректные данные в поле "notBefore" у сертификата',X509_ERROR_IN_CRL_LAST_UPDATE_FIELD:'Некорректные данные в поле "lastUpdate" у CRL',X509_ERROR_IN_CRL_NEXT_UPDATE_FIELD:'Некорректные данные в поле "nextUpdate" у CRL',X509_EXCLUDED_VIOLATION:"Неправильная структура сертфиката",X509_INVALID_CA:"Неверный корневой сертификат",X509_INVALID_EXTENSION:"Неверное или некорректное расширение сертификата",X509_INVALID_NON_CA:"Неверный некорневой сертфикат, помеченный как корневой",X509_INVALID_POLICY_EXTENSION:"Неверное или некорректное расширение политик сертификата",X509_INVALID_PURPOSE:"Неподдерживаемое назначение сертификата",X509_KEYUSAGE_NO_CERTSIGN:"Ключ не может быть использован для подписи сертификатов",X509_KEYUSAGE_NO_CRL_SIGN:"Ключ не может быть использован для подписи CRL",X509_KEYUSAGE_NO_DIGITAL_SIGNATURE:"Ключ не может быть использован для цифровой подписи",X509_NO_EXPLICIT_POLICY:"Явные политики отсутствуют",X509_OUT_OF_MEM:"Нехватает памяти",X509_PATH_LENGTH_EXCEEDED:"Превышена длина пути",X509_PERMITTED_VIOLATION:"Неправильная структура сертифката",X509_PROXY_CERTIFICATES_NOT_ALLOWED:"Проксирующие сертификаты недопустимы",X509_PROXY_PATH_LENGTH_EXCEEDED:"Превышина длина пути прокси",X509_SELF_SIGNED_CERT_IN_CHAIN:"В цепочке обнаружен недоверенный самоподписанный сертификат",X509_SUBJECT_ISSUER_MISMATCH:"Несовпадения субьекта и эмитента",X509_SUBTREE_MINMAX:"Неправильная структура сертифката",X509_UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY:"Невозможно раскодировать открытый ключ эмитента",X509_UNABLE_TO_DECRYPT_CERT_SIGNATURE:"Невозможно расшифровать подпись сертификата",X509_UNABLE_TO_DECRYPT_CRL_SIGNATURE:"Невозможно расшифровать подпись CRL",X509_UNABLE_TO_GET_CRL:"Невозможно получить CRL",X509_UNABLE_TO_GET_CRL_ISSUER:"Невозможно получить CRL подписанта",X509_UNABLE_TO_GET_ISSUER_CERT:"Невозможно получить сертификат подписанта",X509_UNABLE_TO_GET_ISSUER_CERT_LOCALLY:"Невозможно получить локальный сертификат подписанта",X509_UNABLE_TO_VERIFY_LEAF_SIGNATURE:"Невозможно проверить первый сертификат",X509_UNHANDLED_CRITICAL_CRL_EXTENSION:"Неподдерживаемое расширение CRL",X509_UNHANDLED_CRITICAL_EXTENSION:"Неподдерживаемое расширение",X509_UNNESTED_RESOURCE:"RFC 3779 неправильное наследование ресурсов",X509_UNSUPPORTED_CONSTRAINT_SYNTAX:"Неправильная структура сертифката",X509_UNSUPPORTED_CONSTRAINT_TYPE:"Неправильная структура сертфиката",X509_UNSUPPORTED_EXTENSION_FEATURE:"Неподдерживаемое расширение возможностей",X509_UNSUPPORTED_NAME_SYNTAX:"Неправильная структура сертфиката"};var I=["cmsDecrypt","cmsEncrypt","createPkcs10","deleteCertificate","deleteKeyPair","enumerateCertificates","enumerateDevices","enumerateKeys","generateKeyPair","getCertificate","getCertificateInfo","getDeviceInfo","getDeviceModel","getDeviceType","getKeyByCertificate","importCertificate","login","logout","parseCertificate","sign","verify"];const S=function(){var t,n;function r(e){var n=e.message&&e.message.match(/^[0-9]+$/)&&e.message||e,r="";if(t)for(var i in t.errorCodes)if(t.errorCodes[i]==n){r=i;break}return r&&T[r]||r||e.message||e}function a(t){var n=new e;for(var r in t){var o=t[r].rdn,a=t[r].value;o&&a&&(n[o]=a)}return i(n)}function _(t){return t.CN+(t.INNLE?"; ИНН ЮЛ "+t.INNLE:"")+(t.INN?"; ИНН "+t.INN:"")+(t.SNILS?"; СНИЛС "+t.SNILS:"")}function c(t){return t.replace(/^-+(BEGIN|END)[^-]+-+$/gm,"").trim()}this.init=function(){return p().ready.then(function(t){return window.chrome?p().isExtensionInstalled():Promise.resolve(!0)}).then(function(t){if(t)return p().isPluginInstalled();throw new Error("Rutoken Extension wasn't found")}).then(function(t){if(t)return p().loadPlugin();throw new Error("Rutoken Plugin wasn't found")}).then(function(e){var n=I.filter(function(t){return!e[t]});if(n.length)throw console.log("Missing plugin functions: ",n),new Error("Отсутствует функционал, убедитесь, что у вас установлен Рутокен Плагин и вы используете Рутокен ЭЦП 2.0");return(t=e).enumerateDevices()}).then(function(e){var r=e.length;if(1===r)n=e.shift();else{if(0===r)throw new Error("Не обнаружено подключенных устройств");if(r>1)throw new Error("Подключено "+r+" устройств")}return Promise.all([t.getDeviceInfo(n,t.TOKEN_INFO_READER),t.getDeviceInfo(n,t.TOKEN_INFO_LABEL),t.getDeviceInfo(n,t.TOKEN_INFO_SERIAL),t.getDeviceModel(n),t.getDeviceType(n)])}).then(function(e){return{version:t.version,serial:e[2],reader:e[0],label:e[1].indexOf("Rutoken ECP <no label>")+1?"":e[1],type:e[4],model:e[3]}}).then(null,function(t){var e=r(t);throw new Error(e)})},this.bind=function(e){return new Promise(function(i,o){t.getDeviceInfo(n,t.TOKEN_INFO_IS_LOGGED_IN).then(function(t){if(t)return i("Пользователь уже авторизован"),!1;if(!e&&!(e=prompt("PIN-код доступа к устройству")))throw new Error("Авторизация на устройстве отменена пользователем");return!0}).then(function(r){if(r)return t.login(n,e).then(function(t){i(!0)});i(!0)}).then(null,function(t){var e=r(t);o(e)})})},this.unbind=function(){return new Promise(function(e,i){t.getDeviceInfo(n,t.TOKEN_INFO_IS_LOGGED_IN).then(function(t){return!!t||(e("Пользователь не авторизован"),!1)}).then(function(r){return!r||t.logout(n).then(function(t){e(!0)})}).then(null,function(t){var e=r(t);i(e)})})},this.clean=function(){var e=0;return t.enumerateCertificates(n,t.CERT_CATEGORY_USER).then(function(r){var i=[];for(var o in r){var a=r[o];i.push(t.deleteCertificate(n,a))}return e+=i.length,Promise.all(i)}).then(function(){return t.enumerateKeys(n,"")}).then(function(r){var i=[];for(var o in r){var a=r[o];i.push(t.deleteKeyPair(n,a))}return e+=i.length,Promise.all(i)}).then(function(){return e}).then(null,function(t){var e=r(t);throw new Error(e)})},this.generateCSR=function(e,i,o){i&&i.length||(i=["clientAuth","emailProtection"]),o||(o={});var a=o.marker||"",_=o.algorithm&&t[o.algorithm]||t.PUBLIC_KEY_ALGORITHM_GOST3410_2012_256,s="XA",u=t.HASH_TYPE_GOST3411_94;_===t.PUBLIC_KEY_ALGORITHM_GOST3410_2012_512?(s="A",u=t.HASH_TYPE_GOST3411_12_512):_===t.PUBLIC_KEY_ALGORITHM_GOST3410_2012_256&&(u=t.HASH_TYPE_GOST3411_12_256);var E={publicKeyAlgorithm:_,paramset:s},l="";return t.generateKeyPair(n,void 0,a,E).then(function(r){l=r;var o=[];for(var a in e)e.hasOwnProperty(a)&&o.push({rdn:a,value:e[a]});var _={keyUsage:["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment"],extKeyUsage:i},c={subjectSignTool:'СКЗИ "РУТОКЕН ЭЦП"',hashAlgorithm:u};return t.createPkcs10(n,l,o,_,c)}).then(function(t){return{csr:c(t),keyPairId:l}}).then(null,function(e){l&&t.deleteKeyPair(n,l);var i=r(e);throw new Error(i)})},this.writeCertificate=function(e){var i=t.CERT_CATEGORY_USER;return t.importCertificate(n,e,i).then(null,function(t){var e=r(t);throw new Error(e)})},this.certificateInfo=function(e,i){i||(i={});var _=!1,c="";return new Promise(function(i){t.getKeyByCertificate(n,e).then(function(t){i(!!t)}).then(null,function(t){var n=r(t);console.log("getKeyByCertificate",e,n),i(!1)})}).then(function(r){return _=r,t.getCertificateInfo(n,e,t.CERT_INFO_SERIAL_NUMBER)}).then(function(r){return c=r,t.parseCertificate(n,e)}).then(function(t){var n=t.text.match(/Version: (\d+)/),r=n.length>1?n[1]:void 0,i=t.text.match(/Public Key Algorithm: (.+)$/m),s=i.length>1?i[1]:"",u=a(t.subject),E=a(t.issuer),l=new Date;return{Name:u.commonName||u.CN,Issuer:E,IssuerName:o(E.toString()),Subject:u,SubjectName:o(u.toString()),Version:r,Algorithm:s,SerialNumber:c,Thumbprint:e.replace(/\:/g,""),ValidFromDate:new Date(t.validNotBefore),ValidToDate:new Date(t.validNotAfter),HasPrivateKey:_,IsValid:l>=new Date(t.validNotBefore)&&l<=new Date(t.validNotAfter),toString:function(){return"Название:              "+this.Name+"\nИздатель:              "+this.IssuerName+"\nСубъект:               "+this.SubjectName+"\nВерсия:                "+this.Version+"\nАлгоритм:              "+this.Algorithm+"\nСерийный №:            "+this.SerialNumber+"\nОтпечаток SHA1:        "+this.Thumbprint+"\nНе действителен до:    "+this.ValidFromDate+"\nНе действителен после: "+this.ValidToDate+"\nПриватный ключ:        "+(this.HasPrivateKey?"Есть":"Нет (или не выполнен вход)")+"\nВалидный:              "+(this.IsValid?"Да":"Нет")}}}).then(null,function(t){var e=r(t);throw new Error(e)})},this.listCertificates=function(){var e=[],i=[];return t.enumerateCertificates(n,t.CERT_CATEGORY_USER).then(function(r){e=r;var i=[];for(var o in e)i.push(t.parseCertificate(n,e[o]));return Promise.all(i)}).then(function(t){for(var n in e)if(t[n]){var r=a(t[n].subject);i.push({id:e[n],name:_(r),subject:r,validFrom:new Date(t[n].validNotBefore),validTo:new Date(t[n].validNotAfter)})}return i}).then(null,function(t){var e=r(t);throw new Error(e)})},this.readCertificate=function(e){return t.getCertificate(n,e).then(function(t){return c(t)}).then(null,function(t){var e=r(t);throw new Error(e)})},this.signData=function(e,i,o){o||(o={});var a=o.attached;return t.sign(n,i,e,t.DATA_FORMAT_BASE64,{detached:!a}).then(null,function(t){var e=r(t);throw new Error(e)})},this.addSign=function(e,i,o,a){a||(a={});var _=a.attached;return _&&(e=""),t.sign(n,o,e,t.DATA_FORMAT_BASE64,{detached:!_,CMS:i}).then(null,function(t){var e=r(t);throw new Error(e)})},this.verifySign=function(e,i,o){o||(o={});var a={base64:!0,verifyCertificate:!1};return o.attached||(a.data=e),t.verify(n,i,a).then(function(t){if(!t)throw new Error("подпись не верна");return!0}).then(null,function(t){var e=r(t);throw new Error(e)})},this.encryptData=function(e,i){return t.getCertificate(n,i).then(function(r){return t.cmsEncrypt(n,"",[r],e,{base64:!0})}).then(null,function(t){var e=r(t);throw new Error(e)})},this.decryptData=function(e,i){return t.getKeyByCertificate(n,i).then(function(r){return t.cmsDecrypt(n,r,e,{base64:!0})}).then(null,function(t){var e=r(t);throw new Error(e)})}}})(),__webpack_exports__})());
//# sourceMappingURL=ruscrypto.min.js.map